{"version":3,"sources":["webpack:///webpack/bootstrap edb02a6ea85958cc95c6","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./server/config/index.js","webpack:///./server/wechat/index.js","webpack:///external \"path\"","webpack:///./server/api/index.js","webpack:///external \"fs\"","webpack:///external \"transliteration\"","webpack:///external \"babel-types\"","webpack:///./server/wechat-lib/util.js","webpack:///./server/wechat/menu.js","webpack:///external \"bluebird\"","webpack:///external \"manba\"","webpack:///external \"querystring\"","webpack:///external \"request-promise\"","webpack:///external \"sha1\"","webpack:///external \"silly-datetime\"","webpack:///external \"xml2js\"","webpack:///./nuxt.config.js","webpack:///./server/middlewares/common.js","webpack:///./server/middlewares/router.js","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/api/config.js","webpack:///./server/api/project.js","webpack:///./server/api/wechat.js","webpack:///./server/controllers/wechat.js","webpack:///./server/libs/util.js","webpack:///./server/node-script/staff.js","webpack:///./server/wechat-lib/index.js","webpack:///./server/wechat-lib/middleware.js","webpack:///./server/wechat-lib/oauth.js","webpack:///./server/wechat-lib/tpl.js","webpack:///./server/wechat/reply.js","webpack:///external \"constants\"","webpack:///external \"crypto\"","webpack:///external \"ejs\"","webpack:///external \"heredoc\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-router\"","webpack:///external \"koa-session\"","webpack:///external \"raw-body\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"request\"","webpack:///external \"url\"","webpack:///external \"uuid\"","webpack:///./server/index.js"],"names":["Wechat","require","wechat_file","path","join","__dirname","wechat_ticket_file","util","wechatConfig","wechat","corpid","config","secret","appsecret","tokenencodingaeskey","token","encodingaeskey","agentId","getAccessToken","readFileAsync","saveAccessToken","data","JSON","stringify","writeFileAsync","getTicket","saveTicket","getWechat","WechatClient","getOAuth","oauth","project","tpl","exports","parseXMLAsync","xml","Promise","resolve","reject","xml2js","parseString","trim","err","content","formatMessage","result","message","keys","Object","i","length","item","key","Array","val","j","push","info","type","fromUserName","FromUserName","toUserName","ToUserName","isArray","createTime","parseInt","Date","valueOf","msgType","compiled","isJson","str","obj","parse","indexOf","e","sendtpl","console","log","touser","sendmsg","module","wechat_config","SITE_ROOT_URL","head","title","meta","charset","name","link","rel","href","script","src","css","loading","color","plugins","ssr","build","addBody","app","use","koaBody","addSession","CONFIG","maxAge","overwrite","signed","rolling","session","sd","uuid","manba","transliteration","router","get","ctx","next","middle","wechatMiddle","createDep","dep","getAllUsers","post","readFileSync","signature","redirect","body","request","username","success","msg","send","query","page","rows","user","api","EmphasisProject","forEach","index","ProjectName","substr","typeCode","ProjectList","form","GetApply","GetRoles","OrgBasic","RoleCode","Id","Classification","ProjectAuditById","ApplyDate","format","_id","params","ProjectStage","BusinessData","id","getContact","value","slugify","UserCode","slice","HandleStatus","NextSetp","PreStep","requestData","ID","PreSetp","RemoveAction","Remark","State","OrgProperty","CompanyType","GetOptions","res","GetClientUnit","projectInfo","v4","ApplyPerson","CreateDate","CommitProject","searchText","Search","BusinessPhase","BusinessPhaseGroup","QuotedPrice","Biding","Contract","Receive","Type","EditBusinessManager","EditTechnicalManager","HasApprove","_valueFeild","ProjectBusiness","StartTime","BusinessCommit","ChargePerson","FinishTime","PhaseFeedback","ReceiveGroup","hasApprove","GetBiding","GetQuotedPrice","CommitQutoedPrice","CommitBiding","dataType","SetBusinessState","RemoveQuotedPrice","RemoveBiding","RemoveBusinessPhaseGroup","RemoveContact","RemoveReceive","RemoveBusiness","BusinessStage","total","map","phaseId","flag","ProjectID","CheckReceive","CommitContract","CommitReceive","routes","allowedMethods","requestCode","whole","design","Business","Key","requests","options","assign","json","response","base","apiUrl","phoneCode","audit","Users","commitProject","Action","Deleagate","DesignTask","ProjectUpdtae","DesignDeepen","ProjectStop","CommitQuotedPrice","BusinessState","QuotedPriceState","BidingState","GetAllUsers","ContractState","ReceiveState","RoleUsers","Apply","apiToken","code","usercode","url","method","getPhoneCode","encodeURIComponent","RandomCode","headers","Authorization","encodeURI","HasMark","pageSize","ProjectDelegate","SubmitAudit","SetBusinessPhaseState","SetQuotedPriceState","BidingCommit","GetAllStaff","userCode","client","getAuthorizeURL","getAuthorizeUrl","fetchTicket","ticket","fetchAccessToken","access_token","fetchUserInfo","user_ticket","userid","mobile","gender","email","avatar","qr_code","getUserByCode","throw","decodeURIComponent","getSignatureAsync","target","scope","visit","urlObj","urlParse","queryParse","fpath","fs","readFile","writeFile","OrgName","clearDepData","depName","depMap","promisify","menu","crypto","prefix","accessToken","users","create","update","del","dellist","getdepartment","getdepartmentdetail","department","tag","getUsers","addUsers","delUsers","getlist","media","upload","opts","aesKey","Buffer","iv","prototype","PKCS7Decoder","buff","pad","timestamp","delay","Number","encrypt","xmlMsg","random16","pseudoRandomBytes","msgLength","writeUInt32BE","rawMsg","concat","cipher","createCipheriv","cipheredMsg","final","toString","decrypr","echostr","aesCipher","createDecipheriv","setAutoPadding","decipheredBuff","len_netOrder_corpid","msg_len","readUInt32BE","getSignature","nonce","sort","sha1","createHash","digest","verifyURL","encryptMsgs","replyxml","Math","random","msgsignature","resxml","decryptMsg","msgSignature","msgencrypt","Encrypt","decryptedMsg","that","expires_in","isValidAccessToken","then","updateAccessToken","updateTicket","isValidTicket","createUser","getUser","updateUser","delUser","delUserList","useridlist","getDepartment","depid","fetch","getDepartmentdetail","updateDep","delDep","getDep","errmsg","createTag","updateTag","delTag","tagid","getUserbyTag","ture","addUsersByTag","createMenu","delMenu","sendMessgae","reply","Mpnews","description","picurl","sendMessgaebycard","sendMessgaebyText","getUserInfo","openId","_data","now","getTime","msgEncrypt","msg_signature","a","getRawBody","req","limit","encoding","xmlmsg","weixin","apply","replyBody","opt","status","AuthorizeUrl","AccessTokenUrl","UserInfoUrl","workOAuth","corpId","corpSecret","state","ejs","heredoc","tplmsg","compile","querystring","tip","date","person","MsgType","Event","EventKey","sendMsg","projectStatus","card","Content","projects","text","dev","r","host","process","env","HOST","port","PORT","Server","useMiddleWares","nuxt","builder","error","exit","on","render","promise","catch","listen","start"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 45);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap edb02a6ea85958cc95c6","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","//使用es6的代码,不要花里胡哨玩es8\r\nexport default {\r\n  \"db\": \"mongodb://localhost/ice\",\r\n  \"base\": \"http://127.0.0.1:3000\",\r\n  \"apiUrl\":\"http://jgjzkj.rjtms.com/\",\r\n  \"SITE_ROOT_URL\":\"http://jg.imtudou.cn\",\r\n  \"wechat\": {\r\n    \"corpid\": \"ww72312644c862daf9\",//企业ID \r\n    \"secret\":\"UMPfSQdbLenHfmc-h-779Qsieug8Sdm3K7yKpaYQHW0\",//通讯录secret\r\n    \"appsecret\": \"UFKu1RBnA22PLhHJIG5zmGATiCJWXlAW8EPRKlsLhGU\",//应用secret\r\n    \"token\": \"5lCT\",\r\n    \"encodingaeskey\":\"qajOt6CT9Kshq1XkPMNpnUtEJQLR4CzRvA407HoVcQi\",//\r\n    \"agentId\":1000002\r\n  },\r\n  \"mina\": {\r\n    \"appid\": \"wxcac851ec7e9550e2\",\r\n    \"secret\": \"352c61a7c8887e03643a1ff18eb8c5c8\"\r\n  },\r\n  \"shop\": {\r\n    \"appID\": \"\",\r\n    \"mchId\": \"\",\r\n    \"notifyUrl\": \"\",\r\n    \"key\": \"\"\r\n  },\r\n  \"qiniu\": {\r\n    \"AK\": \"7VWsoiyWEKOhqmkE2KmeAY_viXCeyCXmdVOB17Kt\",\r\n    \"SK\": \"up5V2r9layXaQQl8e_VvxZ39ogMUo-a-_wTWupDj\"\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","import config from '../config'\r\nimport WechatOAuth from '../wechat-lib/oauth'\r\nimport path from 'path'\r\n\r\nconst Wechat =require('../wechat-lib/index')\r\n\r\n\r\nvar wechat_file = path.join(__dirname, '.././config/wechat.txt');\r\nvar wechat_ticket_file = path.join(__dirname, '.././config/wechat_ticket.txt');\r\nvar util = require('.././libs/util')\r\n\r\n\r\nconst wechatConfig = {\r\n    wechat: {\r\n      corpid: config.wechat.corpid,\r\n      secret: config.wechat.secret,\r\n      appsecret: config.wechat.appsecret,\r\n      tokenencodingaeskey: config.wechat.token,\r\n      encodingaeskey: config.wechat.encodingaeskey,\r\n      agentId: 1000002,\r\n\r\n    getAccessToken: function () {\r\n      return util.readFileAsync(wechat_file)\r\n    },\r\n    saveAccessToken: function (data) {\r\n      data = JSON.stringify(data)\r\n      return util.writeFileAsync(wechat_file, data)\r\n    },\r\n    getTicket: function () {\r\n      return util.readFileAsync(wechat_ticket_file)\r\n    },\r\n    saveTicket: function (data) {\r\n      data = JSON.stringify(data)\r\n      return util.writeFileAsync(wechat_ticket_file, data)\r\n    }\r\n }\r\n}\r\n\r\nexport const  getWechat =()=>{\r\n  const WechatClient =new Wechat(wechatConfig.wechat) \r\n  return WechatClient\r\n}\r\n\r\n\r\nexport const getOAuth = () => {\r\n  const oauth = new WechatOAuth(wechatConfig.wechat)\r\n  return oauth\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/wechat/index.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","import * as wechat from './wechat'\r\nimport * as project from './project'\r\n\r\nexport default {\r\n    wechat:wechat,\r\n    project:project\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"transliteration\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"transliteration\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"babel-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-types\"\n// module id = 7\n// module chunks = 0","import xml2js from 'xml2js'\r\n\r\nvar tpl=require('./tpl.js');\r\n\r\nexports.parseXMLAsync=function(xml){\r\n\treturn new Promise(function(resolve,reject){\r\n\t\txml2js.parseString(xml,{trim:true},function(err,content){\r\n\t\t\tif (err) {reject(err)}\r\n\t\t\t\telse{resolve(content)}\r\n\t\t})\r\n\t})\r\n};\r\n\r\nexports.formatMessage=function(result){\r\n\tvar message={};\r\n\tif(typeof result === 'object'){\r\n\r\n\t\tvar keys=Object.keys(result);\r\n\t\tfor(var i=0; i<keys.length;i++){\r\n\t\t\tvar item=result[keys[i]];\r\n\t\t\tvar key=keys[i];\r\n\t\t\tif(!(item instanceof Array)|| item.length===0){\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tif(item.length===1){\r\n\t\t\t\tvar val=item[0];\r\n\t\t\t\tif(typeof val === 'object'){\r\n\t\t\t\t\tmessage[key]=formatMessage(val);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmessage[key]=(val||'').trim();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tmessage[key]=[];\r\n\t\t\t\tfor(var j=0;j<item.length;j++){\r\n\t\t\t\t\tmessage[key].push(formatMessage(item[j]));\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\treturn message;\r\n}\r\nexports.tpl=function(content,message){\r\n\tvar info={};\r\n\tvar type='text';\r\n\tvar fromUserName=message.FromUserName;\r\n\tvar toUserName=message.ToUserName;\r\n\tif(Array.isArray(content)){\r\n\t\ttype='news';\r\n\t}\r\n\ttype=\"text\";\r\n\tinfo.content=content;\r\n\tinfo.createTime=parseInt(new Date().valueOf() / 1000);\r\n\tinfo.msgType=type;\r\n\tinfo.toUserName=fromUserName;\r\n\tinfo.fromUserName=toUserName;\r\n\treturn tpl.compiled(info);\r\n}\r\n\r\n\r\nfunction isJson(str){\r\n\t if (typeof str == 'string') {\r\n            try {\r\n                var obj=JSON.parse(str);\r\n                if(str.indexOf('{')>-1){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n\r\n            } catch(e) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n}\r\n\r\nexports.sendtpl =function(content){\r\n\tconsole.log(content)\r\n\tconsole.log(content[0]);\r\n\tvar info ={};\r\n\tvar type ='text';\r\n\tif(isJson(content[1])){\r\n\t\ttype ='news'\r\n\t} \r\n\tinfo.touser =content[0];\r\n         info.msgType=type;\r\n         info.content =content[1];\r\n         return tpl.sendmsg(info);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/wechat-lib/util.js","import wechat_config from '../config' \r\nmodule.exports = {\r\n\t'button': [{\r\n\t\t'type': 'click',\r\n\t\t'name': '项目查询',\r\n\t\t 'sub_button':[{\r\n\t\t\t 'name':'商务项目',\r\n\t\t\t 'type':'click',\r\n\t\t\t 'key':'menu_click_business'\r\n\t\t },{\r\n\t\t\t'name':'设计项目',\r\n\t\t\t'type':'click',\r\n\t\t\t'key':'menu_click_design'\r\n\t\t },{\r\n\t\t\t 'name':'重点项目',\r\n\t\t\t 'type':'click',\r\n\t\t\t 'key':'menu_click_Ech'\r\n\t\t }]\r\n\t}, {\r\n\t\t'type': 'view',\r\n\t\t'name': '我的项目',\r\n\t\t'url': `${wechat_config.SITE_ROOT_URL}/list`\r\n\t}, {\r\n\t\t'name': \"平台管理\",\r\n\t\t'type':'view',\r\n        'url':`${wechat_config.SITE_ROOT_URL}`\r\n\t}]\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/wechat/menu.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"manba\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"manba\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"querystring\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"request-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request-promise\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"sha1\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sha1\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"silly-datetime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"silly-datetime\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"xml2js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xml2js\"\n// module id = 16\n// module chunks = 0","module.exports = {\r\n  /**\r\n   * \r\n   * \r\n   */\r\n  // router: {\r\n  //   middleware: 'wechat-auth'\r\n  // },\r\n  /*\r\n  ** Headers of the page\r\n  */\r\n  head: {\r\n    title: 'starter',\r\n    meta: [\r\n      { charset: 'utf-8' },\r\n      { name: 'viewport', content: 'width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no' }\r\n    ],\r\n    link: [\r\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\r\n      {rel: 'stylesheet', type: 'text/css', href: 'https://unpkg.com/mint-ui/lib/style.css'}\r\n    ],\r\n    script: [\r\n      // {\r\n      //   src: 'http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js'\r\n      // },\r\n      {\r\n        src: 'http://res.wx.qq.com/open/js/jweixin-1.2.0.js'\r\n      }\r\n    ]\r\n  },\r\n  /*\r\n  ** Global CSS\r\n  */\r\n  css: [\r\n    {\r\n      src: 'static/css/weui.css'\r\n    },\r\n    {\r\n      src: 'static/css/example.css'\r\n    },\r\n    {\r\n      src:'static/font-awesome/css/font-awesome.min.css'\r\n    }\r\n  ],\r\n  /*\r\n  ** Customize the progress-bar color\r\n  */\r\n  loading: { color: '#399fff' },\r\n  /*\r\n   ** Build configuration\r\n   */\r\n  plugins: [\r\n    {\r\n      src: '~plugins/mint-ui', ssr: true\r\n    }//,\r\n    // {\r\n    //   src:'~plugins/fastclick',ssr:false\r\n    // }\r\n  ],\r\n  build: {\r\n    /*\r\n     ** Run ESLINT on save\r\n     */\r\n    // extend (config, ctx) {\r\n    //   if (ctx.isClient) {\r\n    //     config.module.rules.push({\r\n    //       enforce: 'pre',\r\n    //       test: /\\.(js|vue)$/,\r\n    //       loader: 'eslint-loader',\r\n    //       exclude: /(node_modules)/\r\n    //     })\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import koaBody from 'koa-bodyparser'\r\nimport session from 'koa-session'\r\n\r\n\r\nexport const addBody  =app =>{\r\n    app.use(koaBody())\r\n}\r\n\r\nexport const addSession =app=>{\r\n    app.keys =['JG_Wx_Server']\r\n    const CONFIG = {\r\n        key: 'koa:sess',\r\n        maxAge: 86400000,\r\n        overwrite: true,\r\n        signed: true,\r\n        rolling: false\r\n      }\r\n\r\n    app.use(session(CONFIG, app))\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares/common.js","import Router from 'koa-router'\r\nimport { resolve } from 'path'\r\nimport api from '../api'\r\n  \r\nimport config from '../config'\r\nimport { reply,send } from '../wechat/reply'\r\nimport wechatMiddle from '../wechat-lib/middleware'\r\nimport { signature, redirect, oauth } from '../controllers/wechat'\r\nimport { readdirSync, readFileSync } from 'fs'\r\nimport sha1 from 'sha1'\r\n\r\nimport { getAllUsers,createDep  } from '../node-script/staff'\r\n\r\nconst sd = require('silly-datetime');\r\n\r\nconst uuid = require('uuid')\r\n\r\nconst manba = require('manba')\r\n\r\nconst transliteration = require('transliteration');\r\n\r\n\r\nexport const router = app => {\r\n  const router = new Router()\r\n\r\n  /**\r\n   * wechat router\r\n   */\r\n\r\n  router.get('/wx', async (ctx, next) => {\r\n    console.log('/wx来了')\r\n    const middle = wechatMiddle(config.wechat, reply)\r\n    await middle(ctx, next)\r\n  })\r\n\r\n\r\n\r\n  router.get('/createDep',async(ctx,next)=>{\r\n     const dep =await createDep()\r\n     console.log(dep)\r\n  })\r\n\r\n  router.get('/createSatff',async(ctx,next)=>{\r\n    getAllUsers()\r\n  })\r\n\r\n  router.post('/wx', async (ctx, next) => {\r\n    const middle = wechatMiddle(config.wechat, reply)\r\n    await middle(ctx, next)\r\n  })\r\n\r\n  router.get('/WW_verify_j4MyzAjMcHIQbgYm.txt', async (ctx, next) => {\r\n    const data = readFileSync(__dirname + './../../WW_verify_j4MyzAjMcHIQbgYm.txt')\r\n    return data\r\n  })\r\n\r\n  router.post('/wechat-pay', async (ctx, next) => {\r\n\r\n  })\r\n\r\n  router.get('/wechat-signature', async (ctx, next) => {\r\n    await signature(ctx, next)\r\n  })\r\n\r\n  router.get('/wechat-redirect',async(ctx,next)=>{\r\n    await redirect(ctx, next)\r\n  })\r\n\r\n  router.get('/wechat-oauth',async(ctx,next)=>{\r\n    await oauth(ctx, next)\r\n  })\r\n\r\n\r\n  /**\r\n   * cms router \r\n   */\r\n   router.post('/api/send',async(ctx,next)=>{\r\n    let body = ctx.request.body\r\n    if(!body || !body.type || !body.username){\r\n      ctx.body = {\r\n        success:false,\r\n        msg:'参数不合法'\r\n      }\r\n    }\r\n    await send(body)\r\n  }) \r\n\r\n  router.get('/api/send',async(ctx,next)=>{\r\n    let query = ctx.query\r\n    if(!query.type){\r\n       ctx.body ={\r\n         success:false,\r\n         msg:'参数不合法'\r\n       }\r\n    }\r\n    console.log(query)\r\n    await send(query)\r\n    ctx.body ={\r\n      success:true\r\n    }\r\n  })\r\n\r\n\r\n\r\n\r\n  /**\r\n   * project router\r\n   * \r\n   */\r\n\r\n  router.get('/api/EmphasisProject',async (ctx, next) => {\r\n  //  if(!ctx.session.user || !ctx.session.user.name){\r\n  //     console.log('error')\r\n  //     ctx.body ={\r\n  //       success:false,\r\n  //       msg:'拿不到用户信息'\r\n  //     }\r\n  //   }\r\n\r\n    let { page } = ctx.query\r\n    let query = {\r\n      page: page,\r\n      rows: 10\r\n    }\r\n    //let user = ctx.session.user.name\r\n    let user ='super'\r\n    //  console.log(user)\r\n    const data = await api.project.EmphasisProject(user, query)\r\n\r\n    data.rows.forEach((item, index) => {\r\n      if (item.ProjectName && item.ProjectName.length > 10) {\r\n        item.ProjectName = item.ProjectName.substr(0, 10) + '...'\r\n      }\r\n    })\r\n\r\n    return (ctx.body = {\r\n      data: data,\r\n      success: true\r\n    })\r\n  })\r\n\r\n\r\n  router.get('/api/ProjectList',async (ctx, next) => {\r\n    if(!ctx.session.user || !ctx.session.user.name){\r\n      console.log('error')\r\n      ctx.body ={\r\n        success:false,\r\n        msg:'拿不到用户信息'\r\n      }\r\n    }\r\n    const { typeCode, page } = ctx.query\r\n    let query = {\r\n      typeCode: typeCode,\r\n      page: page,\r\n      rows: 10\r\n    }\r\n    if (typeCode === '1') {\r\n      query['Classification'] = '设计项目'\r\n    } else if (typeCode === '2') {\r\n      query['Classification'] = '商务项目'\r\n    } else if (typeCode === '3') {\r\n      query['HasMark'] = true\r\n    }\r\n   // let user = ctx.session.user.name\r\n   let user ='super'\r\n   // console.log(user)\r\n   // let username ='super'\r\n    const data = await api.project.ProjectList(user, query)\r\n    //const data =await api.project.ProjectList('super',query)\r\n    return (ctx.body = {\r\n      data: data,\r\n      success: true\r\n    })\r\n  })\r\n\r\n\r\n  router.get('/api/apply',async(ctx,next)=>{\r\n    if(!ctx.session.user || !ctx.session.user.name){\r\n       console.log('error')\r\n       ctx.body ={\r\n        success:false,\r\n        msg:'拿不到用户信息'\r\n       }\r\n    }\r\n    let user = ctx.session.user.name\r\n    //let user ='super'\r\n    let form = {}\r\n    try{\r\n      const data =await api.project.GetApply(user,form)\r\n      // if(data.rows.length>0){\r\n      //   data.rows.forEach((item)=>{\r\n      //     item.ApplyDate = manba(item.ApplyDate).format()\r\n      //   })\r\n      // }\r\n      ctx.body ={\r\n        success:true,\r\n        data:data\r\n      }\r\n    }catch(e){\r\n\r\n    }\r\n  })\r\n\r\n  router.get('/api/GetRoles',async(ctx,next)=>{\r\n     //let user =ctx.session.user\r\n     console.log('111 roles')\r\n     let user ='super'\r\n     try{\r\n        const data =await api.project.GetRoles(user,user)\r\n        ctx.body ={\r\n          success:true,\r\n          data:data.OrgBasic.RoleCode\r\n       }\r\n     }catch(e){\r\n\r\n     }\r\n     \r\n  })\r\n\r\n  router.get('/api/ProjectDateil',async (ctx, next) => {\r\n    const { Id, Classification } = ctx.query\r\n    let user =ctx.session.user.name\r\n    //const user = 'super'\r\n    const query = {\r\n      Id: Id,\r\n      Classification: Classification\r\n    }\r\n    if (Id) {\r\n      const data = await api.project.ProjectAuditById(user, query)\r\n      console.log(data)\r\n      data.rows[0].ApplyDate = manba(data.rows[0].ApplyDate).format()\r\n      ctx.body = {\r\n        success: true,\r\n        data: data\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        success: false,\r\n        msg: 'Id不存在'\r\n      }\r\n    }\r\n  })\r\n\r\n  router.get('/api/AuditProject/:_id',async (ctx, next) => {\r\n    const { _id } = ctx.params\r\n    let query = {\r\n      Id: _id\r\n    }\r\n    //let username = `super`\r\n    let user =ctx.session.user.name\r\n    const data = await api.project.ProjectAuditById(user, query)\r\n    // data.rows[0].CreateDate =manba(data.rows[0].CreateDate).format()\r\n    data.rows[0].ApplyDate = manba(data.rows[0].ApplyDate).format()\r\n    const BusinessData = await api.project.ProjectStage(user, _id)\r\n    return (ctx.body = {\r\n      data: data,\r\n      BusinessData: BusinessData,\r\n      success: true\r\n    })\r\n  })\r\n\r\n  //指派联系人\r\n  router.get('/api/GetContact', async (ctx, next) => {\r\n    if(ctx.session.user.name){\r\n    }else {\r\n      return ctx.body ={\r\n         success:false,\r\n         msg:'拿不到用户信息'\r\n       }\r\n    }\r\n    //const user = `super`\r\n    let user =ctx.session.user.name\r\n    \r\n    const { id } = ctx.query\r\n    try {\r\n      const data = await api.project.getContact(user, id)\r\n      data.forEach(item => {\r\n        item.value = transliteration.slugify(item.UserCode).slice(0, 1)\r\n      })\r\n      ctx.body = {\r\n        data: data,\r\n        success: true\r\n      }\r\n    } catch (e) {\r\n      ctx.body = {\r\n        err: '网络请求出问题啦!',\r\n        success: false\r\n      }\r\n    }\r\n  })\r\n\r\n  //撤销项目\r\n  router.get('/api/RemoveAction',async (ctx, next) => {\r\n    const { HandleStatus, NextSetp, PreStep, id } = ctx.query\r\n    let requestData = {\r\n      HandleStatus: 2,\r\n      ID: id,\r\n      NextSetp: false,\r\n      PreSetp: true\r\n    }\r\n    const username =ctx.session.user.name\r\n    //const user = 'super'\r\n    try {\r\n      const data = await api.project.RemoveAction(username, requestData)\r\n      //console.log(data)\r\n      ctx.body = {\r\n        success: true,\r\n        data: data\r\n      }\r\n    } catch (e) {\r\n      ctx.body = {\r\n        success: false,\r\n        msg: '请联系开发者',\r\n        err: e\r\n      }\r\n    }\r\n  })\r\n\r\n  //审核项目\r\n  router.get('/api/SubmitAudit', async (ctx, next) => {\r\n    const { HandleStatus, NextSetp,PreStep,id,Remark } = ctx.query\r\n    let requestData = {\r\n      HandleStatus: 1,\r\n      ID: id,\r\n      NextSetp: true,\r\n      PreSetp: false,\r\n      Remark: Remark,\r\n      State:\"passed\"\r\n    }\r\n    const username =ctx.session.user.name\r\n    //let user =ctx.session.user.name\r\n    console.log('审核数据')\r\n    console.log(requestData)\r\n    try {\r\n      const data =await api.project.RemoveAction(username, requestData)\r\n      ctx.body = {\r\n        success: true,\r\n        data: data\r\n      }\r\n    } catch (e) {\r\n      ctx.body = {\r\n        success: false,\r\n        err: e\r\n      }\r\n    }\r\n  })\r\n\r\n  //获取单位\r\n  router.get('/api/getOptions',async (ctx, next) => {\r\n    let user =ctx.session.user\r\n    const { OrgProperty, CompanyType, page, rows } = ctx.query\r\n\r\n    let data = {\r\n      OrgProperty: OrgProperty,\r\n      CompanyType: CompanyType,\r\n      page: page,\r\n      rows: rows\r\n    }\r\n    const res = await api.project.GetOptions(user.name, data)\r\n    return (ctx.body = {\r\n      success: true,\r\n      data: res\r\n    })\r\n  })\r\n\r\n  //\r\n  router.get('/api/getClientUnit',async (ctx, next) => {\r\n    const { OrgProperty, page, rows } = ctx.query\r\n    let data = {\r\n      OrgProperty: OrgProperty,\r\n      page: page,\r\n      rows: rows\r\n    }\r\n    let user =ctx.session.user.name\r\n    let username ='super'\r\n    const res = await api.project.GetClientUnit(user, data)\r\n    ctx.body = {\r\n      success: true,\r\n      data: res\r\n    }\r\n  })\r\n\r\n  //项目提交\r\n  router.post('/api/commitProject',async (ctx, next) => {\r\n    let projectInfo = ctx.request.body\r\n    //let user = 'super'\r\n    let user =ctx.session.user.name\r\n    //console.log(projectInfo)\r\n    projectInfo.form.ID = uuid.v4()\r\n    projectInfo.form.ApplyDate = sd.format(new Date(), 'YYYY-MM-DD')\r\n    projectInfo.form.ApplyPerson =user.name\r\n    //  projectInfo.form.StartTime =sd.format(new Date(),'YYYY-MM-DD')\r\n    projectInfo.form.CreateDate = sd.format(new Date(), 'YYYY-MM-DD')\r\n    console.log(projectInfo)\r\n    try {\r\n      const data = await api.project.CommitProject(user, projectInfo)\r\n      console.log(data)\r\n      ctx.body = {\r\n        success: true,\r\n        data: data\r\n      }\r\n    } catch (e) {\r\n      ctx.body = {\r\n        success: false,\r\n        err: e\r\n      }\r\n    }\r\n  })\r\n\r\n  //搜索项目\r\n  router.get('/api/search',async (ctx, next) => {\r\n    let { searchText, page } = ctx.query\r\n    let user = ctx.session.user.name\r\n    let query = {\r\n      searchText: searchText,\r\n      page: page,\r\n      rows: 10\r\n    }\r\n   \r\n    try {\r\n      const data = await api.project.Search(user, query)\r\n      data.rows.forEach((item, index) => {\r\n        if (item.ProjectName.length > 10) {\r\n          item.ProjectName = item.ProjectName.substr(0, 10) + '...'\r\n        }\r\n      })\r\n\r\n      ctx.body = {\r\n        success: true,\r\n        data: data\r\n      }\r\n    } catch (e) {\r\n      ctx.body = {\r\n        success: false,\r\n        err: e\r\n      }\r\n    }\r\n  })\r\n\r\n  //查询每个阶段的项目详情\r\n  router.get('/api/getSectionDetail',async (ctx,next) => {\r\n    const { type, Id } = ctx.query\r\n    let data = null\r\n    let user =ctx.session.user.name\r\n    switch (type) {\r\n      case \"BusinessPhase\":\r\n        data = await api.project.BusinessPhase(user, Id)\r\n        break;\r\n      case \"BusinessPhaseGroup\":\r\n        data = await api.project.BusinessPhaseGroup(user, Id)\r\n        break;\r\n      case \"QuotedPrice\":\r\n        data = await api.project.QuotedPrice(user, Id)\r\n        break;\r\n      case \"Biding\":\r\n        data = await api.project.Biding(user, Id)\r\n        break;\r\n      case \"Contract\":\r\n        data = await api.project.Contract(user, Id)\r\n        break;\r\n      case \"Receive\":\r\n        data = await api.project.Receive(user, Id)\r\n        break;\r\n    }\r\n    console.log(data)\r\n    if(data.rows.length>0){\r\n      data.rows.forEach((item,index)=>{\r\n        item.ApplyDate =manba(item.ApplyDate).format()\r\n      })\r\n    }\r\n    //data.rows[0].ApplyDate = manba(data.rows[0].ApplyDate).format()\r\n\r\n    ctx.body = {\r\n      success: true,\r\n      data: data\r\n    }\r\n  })\r\n\r\n  router.post('/api/ProjecyUpdate/:_id',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n    let id = ctx.params._id\r\n    let user  =ctx.session.user.name\r\n    let result = null\r\n    console.log(data)\r\n    if (data[0].Type === 1) {\r\n      await api.project.EditBusinessManager(user,id,data)\r\n    } else if (data[0].Type === 2) {\r\n      await api.project.EditTechnicalManager(user,id,data)\r\n    }\r\n    // const result =await api.project.ProjectUpdtae(user,id,data)\r\n    console.log(result)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  router.get('/api/ProjectBusiness',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    let user =ctx.session.user.name\r\n    let query = {\r\n      HasApprove: true,\r\n      value: Id,\r\n      _valueFeild: 'value'\r\n    }\r\n    const data = await api.project.ProjectBusiness(user, query)\r\n    ctx.body = {\r\n      data: data,\r\n      success: true\r\n    }\r\n  })\r\n\r\n  //提交商务阶段\r\n  router.post('/api/BusinessCommit',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n    let user =ctx.session.user.name\r\n    data.form.ID = uuid.v4()\r\n    data.form.ApplyDate = sd.format(new Date(), 'YYYY-MM-DD')\r\n    data.form.StartTime = sd.format(new Date(), 'YYYY-MM-DD')\r\n    console.log(data)\r\n    const result = api.project.BusinessCommit(user, data)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  //商务阶段跟踪反馈\r\n  router.post('/api/PhaseFeedback',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n    let username =ctx.session.user.name\r\n    data.form.ApplyPerson = username\r\n      data.form.ChargePerson =username\r\n    data.form.FinishTime = sd.format(new Date(), 'YYYY-MM-DD')\r\n    data.form.ID = uuid.v4()\r\n    console.log('商务阶段跟踪反馈')\r\n    console.log(data)\r\n    const result = await api.project.PhaseFeedback(username, data)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n\r\n  //收款登记\r\n  router.get('/api/ReceiveGroup',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    let username =ctx.session.user.name\r\n    let query = {\r\n      value: Id\r\n    }\r\n    const result = await api.project.ReceiveGroup(username, query)\r\n    console.log(result)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  //收款登记提交\r\n  router.post('/api/ReceiveCommit',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    let username =ctx.session.user.name\r\n    let query = {\r\n      value: Id\r\n    }\r\n    const result = await api.project.ReceiveGroup(username, query)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  router.get('/api/GetBiding',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    let query = {\r\n      hasApprove: 'True',\r\n      value: Id\r\n    }\r\n    let username =ctx.session.user.name\r\n    //这里是跨服务调用的接口恨薄的一层，后面 最好加上一些服务熔断\r\n    const result = await api.project.GetBiding(username, query)\r\n\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  router.get('/api/QuotedPrice',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    const query = {\r\n      hasApprove: 'True',\r\n      value: Id\r\n    }\r\n    const result = await api.project.GetQuotedPrice(user, query)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  router.post('/api/CommitQuoted',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n    let user =ctx.session.user.name\r\n    data.form.ApplyDate = sd.format(new Date(), 'YYYY-MM-DD')\r\n    data.form.ApplyPerson = user\r\n    data.form.ID = uuid.v4()\r\n    console.log(data)\r\n    const result = await api.project.CommitQutoedPrice(user, data)\r\n    //跨进程的通信,可以加一些调用之间融错,不然恨单薄的一层,\r\n\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  router.post('/api/CommitBiding',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n    data.form.ApplyDate = sd.format(new Date(), 'YYYY-MM-DD')\r\n    data.form.ApplyPerson = '超级管理员'\r\n    data.form.ID = uuid.v4()\r\n    console.log(data)\r\n    //这个地方可以加一些融错,不然恨单薄的一层\r\n    const result = await api.project.CommitBiding(user, data)\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  router.post('/api/AuditItem',async (ctx, next) => {\r\n    let form = ctx.request.body\r\n    let data = null\r\n    if (!form.dataType) {\r\n      ctx.body = {\r\n        success: false,\r\n        message: \"缺少参数\"\r\n      }\r\n    }\r\n    switch (form.dataType) {\r\n      case 'BusinessPhase':\r\n        data = api.project.SetBusinessState(user, form)\r\n        break\r\n      case \"QuotedPrice\":\r\n        data = api.project.RemoveQuotedPrice(user, form)\r\n        break;\r\n      case \"Biding\":\r\n        data =api.project.RemoveBiding(user,form)\r\n        break;\r\n      case \"BusinessPhaseGroup\":\r\n        data =api.project.RemoveBusinessPhaseGroup(user,form)\r\n        break\r\n      case \"Contract\":\r\n        data =api.project.RemoveContact(user,form)\r\n        break\r\n      case \"Receive\":\r\n         data =api.project.RemoveReceive(user,form)\r\n         break\r\n    }\r\n    ctx.body = {\r\n      success: true,\r\n      data: data\r\n    }\r\n  })\r\n\r\n  router.post('/api/RevocationItem',async (ctx, next) => {\r\n    let form = ctx.request.body\r\n    let data = null\r\n    if (!form.dataType) {\r\n      ctx.body = {\r\n        success: false,\r\n        message: \"缺少参数\"\r\n      }\r\n    }\r\n    switch (form.dataType) {\r\n      case 'BusinessPhase':\r\n        data = api.project.RemoveBusiness(user, form)\r\n        break;\r\n      case \"BusinessPhaseGroup\":\r\n        data = api.project.RemoveBusinessPhaseGroup(user, form)\r\n        break\r\n      case 'QuotedPrice':\r\n        data = api.project.RemoveQuotedPrice(user, form)\r\n        break\r\n      case \"Biding\":\r\n          data =api.project.RemoveBiding(user,form)\r\n        break\r\n      case \"Contract\":\r\n          data =api.project.RemoveContact(user,form)\r\n        break\r\n      case \"Receive\":\r\n           data =api.project.RemoveReceive(user,form)\r\n        break\r\n    }\r\n    ctx.body = {\r\n      success: true,\r\n      data: data\r\n    }\r\n  })\r\n\r\n\r\n  router.get('/api/BusinessStage',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    const data = await api.project.BusinessStage(user, Id)\r\n\r\n    console.log(data)\r\n    if (data.total > 0) {\r\n      let map = []\r\n      data.rows.forEach((item, index) => {\r\n        if (map.length > 0) {\r\n        } else {\r\n          map.push({\r\n            Id: item.ID\r\n          })\r\n        }\r\n      })\r\n      console.log(map);\r\n      let phaseId = map[0].Id\r\n      ctx.body = {\r\n        success: true,\r\n        flag: true,\r\n        phaseId: phaseId\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        success: true,\r\n        flag: false\r\n      }\r\n    }\r\n  })\r\n\r\n  router.get('/api/GetDetailByBusiness',async (ctx, next) => {\r\n    const { Id } = ctx.query\r\n    let user =ctx.session.user.name\r\n    const data = await api.project.BusinessStage(user, Id)\r\n    if (data.total > 0) {\r\n      let map = []\r\n      data.rows.forEach((item, index) => {\r\n        if (item.HandleStatus == 2) {\r\n          if (map.length > 0) {\r\n          } else {\r\n            map.push({\r\n              Id: item.ID\r\n            })\r\n          }\r\n        }\r\n      })\r\n      let phaseId = map[0].Id\r\n      let query = {\r\n        HasApprove: true,\r\n        value: phaseId,\r\n        _valueFeild: 'value'\r\n      }\r\n      let result = await api.project.ProjectBusiness(user, query)\r\n      console.log('reusk')\r\n      console.log(result)\r\n      ctx.body = {\r\n        success: true,\r\n        data: result\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        success: true,\r\n        data: []\r\n      }\r\n    }\r\n  })\r\n\r\n  router.post('/api/SetDateilCommitState',async (ctx, next) => {\r\n    let form = ctx.request.body\r\n    let data = null\r\n    let user =ctx.session.user.name\r\n    if (!form.dataType) {\r\n      ctx.body = {\r\n        success: false,\r\n        message: \"缺少参数\"\r\n      }\r\n    }\r\n    switch (form.dataType) {\r\n      case 'BusinessPhase':\r\n        data = api.project.RemoveBusiness(user, form)\r\n        break;\r\n      case \"BusinessPhaseGroup\":\r\n        data = api.project.RemoveBusinessPhaseGroup(user, form)\r\n        break;\r\n      case \"QuotedPrice\":\r\n        data = api.project.RemoveQuotedPrice(user, form)\r\n        break;\r\n      case \"Biding\":\r\n        data =api.project.RemoveBiding(user,form) \r\n        break;\r\n      case \"Contract\":\r\n        data =api.project.RemoveContact(user,form)\r\n        break;\r\n      case \"Receive\":\r\n         data =api.project.RemoveReceive(user,form)\r\n        break;\r\n    }\r\n    ctx.body = {\r\n      success: true,\r\n      data: data\r\n    }\r\n  })\r\n\r\n\r\n  router.get('/api/CheckReceive',async (ctx, next) => {\r\n    if(ctx.session.user.name){\r\n    }else {\r\n      return ctx.body ={\r\n        success:false,\r\n        msg:\"拿不到用户的信息\"\r\n      }\r\n    }\r\n    const { Id } = ctx.query\r\n   let user =ctx.session.user.name\r\n    let query = {\r\n      ProjectID: Id,\r\n      page: 1,\r\n      rows: 20\r\n    }\r\n    \r\n    const data = await api.project.CheckReceive(user, query)\r\n    if (data.total > 0) {\r\n      // let phaseId =data.rows[0].ID\r\n      // console.log(phaseId)\r\n      ctx.body = {\r\n        success: true,\r\n        flag: true,\r\n        data: data.rows[0]\r\n        //     phaseId:phaseId\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        success: true,\r\n        flag: false\r\n      }\r\n    }\r\n  })\r\n\r\n  router.post('/api/CommitContract',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n    let user =ctx.session.user.name\r\n    data.form.ApplyDate = sd.format(new Date(), 'YYYY-MM-DD')\r\n    data.form.ApplyPerson =user\r\n    if (data.form.ID.length > 0) {\r\n    } else {\r\n      data.form.ID = uuid.v4()\r\n    }\r\n    // console.log(data)\r\n    const result = await api.project.CommitContract(user, data)\r\n    //跨进程的通信,可以加一些调用之间融错,不然恨单薄的一层,\r\n\r\n    ctx.body = {\r\n      success: true,\r\n      data: result\r\n    }\r\n  })\r\n\r\n  //检查用户的权限\r\n  router.get('checkUser', async (ctx, next) => {\r\n\r\n  })\r\n\r\n  router.post('/api/CommitReceive',async (ctx, next) => {\r\n    let data = ctx.request.body\r\n   let user =ctx.session.user.name\r\n    data.form.ID = uuid.v4()\r\n    console.log(data)\r\n    const result = await api.project.CommitReceive(user, data)\r\n    ctx.body = {\r\n      data: result,\r\n      success: true\r\n    }\r\n  })\r\n\r\n\r\n  app\r\n    .use(router.routes())\r\n    .use(router.allowedMethods())\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares/router.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 21\n// module chunks = 0","/**\r\n * 接口配置文件\r\n */\r\nexport const requestCode ={\r\n    whole:0,\r\n    design:1,\r\n    Business:2,\r\n    Key:3\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/config.js","/**\r\n * project--接口\r\n * 改造 把token 保存到 Vuex中 写两个方法来获取Get/Set\r\n */\r\nimport request from 'request-promise'\r\nimport config from  '../config'\r\nimport { requestCode } from './config'\r\nimport { exportSpecifier } from 'babel-types';\r\n\r\nconst requests = async (options) => {\r\n    options = Object.assign({}, options, { json: true })\r\n\r\n    try {\r\n        const response = await request(options)\r\n        return response\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n//请求api\r\nconst base = config.apiUrl\r\nconsole.log(base)\r\nconst api = {\r\n    token: `${base}login/DoActionApp`,\r\n    phoneCode: `${base}/login/GetAppRandomCode?`,\r\n    EmphasisProject: `${base}api/BasicData/Project?`,\r\n    audit: `${base}/api/BasicData/Project/GetPageData?`,\r\n    project:`${base}api/BasicData/Project/Get?`,\r\n    Business:`${base}api/BasicData/BusinessPhase/Get?`,\r\n    Users:`${base}api/BasicData/Project/GetProjectManagersWithCheck/?`,\r\n    GetOptions:`${base}api/BasicData/Organization/GetOptions?`,\r\n    commitProject:`${base}api/BasicData/Project/edit/`,\r\n    RemoveAction:`${base}api/BasicData/Project/EditStateByNode`,\r\n    Action:`${base}api/BasicData/Project/EditStateByNode`,\r\n    Search:`${base}api/BasicData/Project?`,\r\n    Deleagate:`${base}api`,\r\n    DesignTask:`${base}api/BasicData/DesignTask/Get?`,\r\n    BusinessPhase:`${base}api/BasicData/BusinessPhase/Get?`,\r\n    BusinessPhaseGroup:`${base}api/BasicData/PhaseFeedback/Get?`,\r\n    QuotedPrice:`${base}api/BasicData/QuotedPrice?`,\r\n    ProjectUpdtae:`${base}api/BasicData/Project/EditProjectManagersByNode/`,\r\n    Biding:`${base}api/BasicData/Biding?`,\r\n    Contract:`${base}api/BasicData/Contract?`,\r\n    Receive:`${base}api/BasicData/Receive/Get?`,\r\n    DesignDeepen:`${base}api/BasicData/DesignDeepen?`,\r\n    ProjectStop:`${base}`,\r\n    ProjectBusiness:`${base}api/BasicData/Project/GetOptions?`,\r\n    EditTechnicalManager:`${base}api/BasicData/Project/EditTechnicalManager/`,\r\n    EditBusinessManager:`${base}api/BasicData/Project/EditBusinessManager/`,\r\n    BusinessCommit:`${base}api/BasicData/BusinessPhase/edit/`,\r\n    ReceiveGroup:`${base}api/BasicData/Contract/GetOptions?`,\r\n    GetBiding:`${base}api/BasicData/Project/GetOptions?`,\r\n    PhaseFeedback:`${base}api/BasicData/PhaseFeedback/edit/`,\r\n    CommitBiding:`${base}api/BasicData/Biding/edit/`,\r\n    CommitQuotedPrice:`${base}api/BasicData/QuotedPrice/edit/'`,\r\n    BusinessState:`${base}api/BasicData/BusinessPhase/EditStateByNode`,\r\n    QuotedPriceState:`${base}api/BasicData/QuotedPrice/EditStateByNode`,\r\n    BidingState:`${base}api/BasicData//Biding/EditState/`,\r\n    BusinessStage:`${base}api/BasicData/BusinessPhase/Get?`,\r\n    CommitContract:`${base}api/BasicData/Contract/edit`,\r\n    CheckReceive:`${base}api/BasicData/ReceiveGroup/GetReceive?`,\r\n    CommitReceive:`${base}api/BasicData/Receive/Edit/`,\r\n    GetAllUsers :`${base}/api/Sys/Users`,\r\n    ContractState:`${base}/api/BasicData/Contract/EditState/`,\r\n    ReceiveState:`${base}/api/BasicData/Receive/EditState`,\r\n    //PhaseFeedback:`${base}/api/BasicData/PhaseFeedback/EditState/`,\r\n    RoleUsers:`${base}api/Sys/User/GetUserOrgBasic?`,\r\n    Apply:`${base}api/BasicData/Project/GetHasApply?`\r\n}\r\n\r\nconst apiToken = async (username, code) => {\r\n    const api = {\r\n        usercode: username,\r\n        code: code,\r\n        app: true\r\n    }\r\n    const url = `${base}login/DoActionApp`\r\n    const options = {\r\n        method: 'POST',\r\n        url: url,\r\n        body: api\r\n    }\r\n    let data\r\n    try {\r\n        data = await requests(options)\r\n        return data\r\n\r\n    }catch(e) {\r\n        let err  = {\r\n            success:false,\r\n            msg:'后端错误,请联系开发者'\r\n        }\r\n        return err\r\n    }\r\n}\r\n\r\nconst getPhoneCode = async (username) => {\r\n    const url = `${api.phoneCode}UserCode=${encodeURIComponent(username)}`\r\n    const options = {\r\n        method: 'POST',\r\n        url: url\r\n    }\r\n    try{\r\n        const data = await requests(options)\r\n        return data\r\n    }catch(e){\r\n        let err  = {\r\n            success:false,\r\n            msg:'服务器错误,请联系开发者'\r\n        }\r\n        return err\r\n    }\r\n}\r\n\r\n\r\n\r\n//请求重点项目\r\nexport async function EmphasisProject(username,query) {\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url = `${api.EmphasisProject}page=${query.page}&rows=${query.rows}`\r\n    const options = {\r\n        url: url,\r\n        headers: {\r\n            Authorization: token.token\r\n        }\r\n    }\r\n    try {\r\n        const data = await requests(options)\r\n        return data\r\n        console.log(data)\r\n    }catch(e){\r\n        return ({\r\n            success:false,\r\n            err:e,\r\n            msg:'请求服务端失败'\r\n        })\r\n    }\r\n   \r\n    //  console.log(data)\r\n    return data\r\n}\r\n\r\n//项目列表\r\nexport async function ProjectList(username, query) {\r\n    console.log(username)\r\n    const code = await getPhoneCode(username)\r\n    console.log(code)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    let url = `${api.EmphasisProject}`\r\n    console.log(query);\r\n    console.log(query.typeCode);\r\n    console.log(query.typeCode==='1');\r\n    \r\n    if (query.typeCode === '1') {//设计项目\r\n        console.log('进来了')\r\n        url = `${api.EmphasisProject}Classification=${encodeURI(query.Classification)}&page=${query.page}&rows=${query.rows}`\r\n    } else if (query.typeCode ==='2') {\r\n        url = `${api.EmphasisProject}Classification=${encodeURI(query.Classification)}&page=${query.page}&rows=${query.rows}`\r\n    } else if (query.typeCode ==='3') {\r\n         console.log('进来了')\r\n        url = `${api.EmphasisProject}HasMark=${query.HasMark}&page=${query.page}&rows=${query.rows}`\r\n    }else {\r\n        let pageSize =10\r\n        url =`${api.EmphasisProject}page=${query.page}&rows=${query.rows}`\r\n        \r\n    }\r\n    console.log(url)\r\n    const options = {\r\n        url: url,\r\n        headers: {\r\n            Authorization: token.token\r\n        }\r\n    }\r\n    const data = await requests(options)\r\n    return data\r\n}\r\n\r\n//BusinessPhase 商务阶段跟新\r\nexport async function BusinessPhase(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BusinessPhase}ProjectID=${id}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目商务阶段进度跟踪反馈\r\nexport async function BusinessPhaseGroup(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BusinessPhaseGroup}ID=${id}`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    console.log(data)\r\n    return data\r\n}\r\n\r\n//项目投标申请\r\nexport async function Biding(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url = `${api.Biding}ProjectID=${id}&pgae=1&rows=10`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目报价申请\r\nexport async function QuotedPrice(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.QuotedPrice}ProjectID=${id}&page=1&rows=20`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n        \r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\n//合同管理\r\nexport async function Contract(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url = `${api.Contract}ProjectID=${id}&page=1&rows=20`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目报价申请\r\nexport async function Receive(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url = `${api.Receive}ProjectID=${id}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目设计深化申请\r\nexport async function DesignDeepen(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.DesignDeepen}ProjectID=${id}&page=1&rows=10`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n//项目设计任务\r\nexport async function DesignTask(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url = `${api.DesignTask}ProjectID=${id}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目基本信息\r\nexport async function ProjectAuditById(username, query) {\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    let url = `${api.project}ID=${query.Id}`\r\n    const options = {\r\n        url: url,\r\n        headers: {\r\n            Authorization: token.token\r\n        }\r\n    }\r\n    const data = await requests(options)\r\n    return data\r\n}\r\n\r\n//项目阶段\r\nexport async function ProjectStage(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.Business}ProjectID=${id}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目委托信息\r\nexport async function ProjectDelegate(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n}\r\n\r\nexport async function getContact(username,id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.Users}ProjectID=${id}`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\nexport async function RemoveAction(user,query){\r\n    const code = await getPhoneCode(user)\r\n    const token = await apiToken(user, code.RandomCode)\r\n    console.log(query)\r\n    const url =`${api.RemoveAction}/${query.ID}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:query\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//提交审核\r\nexport async function SubmitAudit(user,query){\r\n    const code = await getPhoneCode(user)\r\n    const token = await apiToken(user, code.RandomCode)\r\n\r\n    const url =`${api.RemoveAction}/${query.ID}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:query\r\n    }\r\n    const data =await request(options)\r\n    return data\r\n}\r\n\r\n//商务阶段详细\r\nexport async function ProjectBusiness(user,query){\r\n    const code = await getPhoneCode(user)\r\n    const token = await apiToken(user, code.RandomCode)\r\n    const url =`${api.ProjectBusiness}HasApprove=${query.HasApprove}&value=${query.value}&_valueFeild=value`\r\n\r\n    const options ={\r\n        method:'Get',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await request(options)\r\n    return data\r\n}\r\n\r\n\r\n//商务最新的阶段\r\nexport async function BusinessStage(username,Id){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BusinessStage}ProjectID=${Id}`\r\n    console.log(url);\r\n    const options ={\r\n        method:'get',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\nexport async function GetOptions(username,query){\r\n    const { OrgProperty, CompanyType,rows,page} =query\r\n    console.log(query)\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.GetOptions}OrgProperty=${encodeURI(OrgProperty)}&CompanyType=${encodeURI(CompanyType)}&page=${page}&rows=${rows}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\nexport async function GetClientUnit(username,query){\r\n    const { OrgProperty,rows,page} =query\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.GetOptions}OrgProperty=${encodeURI(OrgProperty)}&page=${page}&rows=${rows}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\nexport async function CommitProject(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.commitProject}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\nexport async function CommitBiding(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.CommitBiding}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\nexport async function CommitQuotedPrice(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.CommitQuotedPrice}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\n\r\n//审核数据\r\nexport async function SetBusinessState(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BusinessState}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//审核商务阶段跟踪反馈数据\r\nexport async function SetBusinessPhaseState(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BusinessState}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//审核报价申请\r\nexport async function SetQuotedPriceState(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.QuotedPriceState}/${form.ID}`\r\n    const options ={\r\n        method:\"post\",\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//商务阶段提交撤销\r\nexport async function RemoveBusiness(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BusinessState}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//商务阶段撤销提交\r\nexport async function RemoveBusinessPhaseGroup(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.PhaseFeedback}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//报价申请数据撤销\r\nexport async function RemoveQuotedPrice(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.QuotedPriceState}/${form.ID}`\r\n    console.log(url)\r\n    const options ={\r\n        method:\"post\",\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//撤销投标申请\r\nexport async function RemoveBiding(username,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.BidingState}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//合同\r\nexport async function RemoveContact(username,form){\r\n    const code =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.ContractState}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//收款登记\r\nexport async function RemoveReceive(username,form){\r\n    const code =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.ReceiveState}/${form.ID}`\r\n    const options ={\r\n        method:'post',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    } \r\n    const data =await requests(options)\r\n    return data  \r\n}\r\n\r\n//搜索\r\nexport async function Search(username,query){\r\n    console.log(query)\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url =`${api.Search}ProjectName=${encodeURI(query.searchText)}&page=${query.page}&rows=${query.rows}`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\nexport async function ProjectUpdtae(username,id,form) {\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    const url = `${api.ProjectUpdtae}${id}`\r\n    const options ={\r\n        url:url,\r\n        method:'POST',\r\n        body:form,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//更新技术指派人\r\nexport async function EditTechnicalManager(username,id,form){\r\n    const code = await getPhoneCode(username)\r\n    console.log(code)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    console.log(token)\r\n    const url =`${api.EditTechnicalManager}${id}`\r\n    const options ={\r\n        url:url,\r\n        method:'POST',\r\n        body:form,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n// 更新商务阶段指派人\r\nexport async function EditBusinessManager(username,id,form){\r\n    const code = await getPhoneCode(username)\r\n    const token = await apiToken(username, code.RandomCode)\r\n    console.log(token)\r\n    const url =`${api.EditBusinessManager}${id}`\r\n    const options ={\r\n        url:url,\r\n        method:'POST',\r\n        body:form,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\n\r\n//商务阶段更新提交\r\nexport async function BusinessCommit(username,form){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.BusinessCommit}`\r\n    const options ={\r\n        url:url,\r\n        method:'POST',\r\n        body:form,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//项目收款登记\r\nexport async function ReceiveGroup(username,query){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    //http://localhost:2437/api/BasicData/Contract/GetOptions?value=62253760-EA67-42DD-A14D-0B0D259DCE34&_valueFeild=value\r\n    const url =`${api.ReceiveGroup}value=${query.value}&_valueFeild=value`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    console.log(data)\r\n    return data\r\n}\r\n\r\n//项目投标\r\nexport async function GetBiding(username,query){\r\n    console.log('xxx')\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url = `${api.GetBiding}HasApprove=${query.hasApprove}&value=${query.value}&_valueFeild=value`\r\n    console.log(url)\r\n    const options = {\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    console.log(data)\r\n    return data\r\n}\r\n\r\n//项目商务阶段跟踪任务反馈提交 \r\nexport async function PhaseFeedback(username,form){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url = `${api.PhaseFeedback}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\nexport async function BidingCommit(){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =''\r\n    const options ={\r\n      method:'post',\r\n      url:url,\r\n      headers:{\r\n          Authorization:token.token\r\n      },\r\n      body:form\r\n    }\r\n}\r\n\r\nexport async function CommitQutoedPrice(username,form){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.CommitQuotedPrice}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =requests(options)\r\n    return data\r\n}\r\n\r\nexport async function CommitContract(username,form){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.CommitContract}`\r\n    const options ={\r\n        method:'POST',\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        body:form\r\n    }\r\n    const data =requests(options)\r\n\r\n}\r\n\r\nexport async function GetQuotedPrice(username,query){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url = `${api.GetBiding}HasApprove=${query.hasApprove}&value=${query.value}&_valueFeild=value`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//检查当前项目有没有合同\r\nexport async function CheckReceive(username,query){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.CheckReceive}ProjectID=${query.ProjectID}&page=${query.page}&rows=${query.rows}`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n        Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n\r\n//添加收款登记\r\nexport async function CommitReceive(username,form){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.CommitReceive}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        method:'POST',\r\n        body:form\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//导入人员\r\n\r\nexport async function  GetAllStaff(url,username,form){\r\n    const code  =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        }\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\n//权限--用户角色\r\nexport async function GetRoles(username,userCode){\r\n    const code =await getPhoneCode(username)\r\n    const token =await apiToken(username,code.RandomCode)\r\n    const url =`${api.RoleUsers}UserCode=${encodeURI(userCode)}`\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        method:'Get'\r\n    }\r\n    const data =await requests(options)\r\n    return data\r\n}\r\n\r\nexport async function GetApply(username,form){\r\n    const code =await getPhoneCode(username)\r\n    const token = await apiToken(username,code.RandomCode)\r\n    const url = `${api.Apply}page=1&rows=20`\r\n    console.log(url)\r\n    const options ={\r\n        url:url,\r\n        headers:{\r\n            Authorization:token.token\r\n        },\r\n        method:'Get'\r\n    }\r\n    const data =await request(options)\r\n    return data \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/project.js","/**\r\n * 微信接口\r\n */\r\nimport {  getWechat, getOAuth } from '../wechat'\r\n\r\n\r\nconst client = getWechat()\r\n\r\n// export async function getSignatureAsync (url) {\r\n//   const data = await client.fetchAccessToken()\r\n//   const token = data.access_token\r\n//   const ticketData = await client.fetchTicket(token)\r\n//   const ticket = ticketData.ticket\r\n\r\n//   let params = client.sign(ticket, url)\r\n//   params.appId = client.appID\r\n\r\n//   return params\r\n// }\r\n\r\nexport function getAuthorizeURL (...args) {\r\n  const oauth = getOAuth()\r\n  return oauth.getAuthorizeUrl(...args)\r\n}\r\n\r\nexport async function getUserByCode (code) {\r\n  const oauth = getOAuth()\r\n  \r\n  const ticket =await client.fetchTicket()\r\n  const data = await oauth.fetchAccessToken(ticket.access_token,code)\r\n  const user =await oauth.fetchUserInfo(ticket.access_token,data.user_ticket)\r\n  return {\r\n    userid:user.userid,\r\n    name:user.name,\r\n    mobile:user.mobile,\r\n    gender:user.gender,\r\n    email:user.email,\r\n    avatar:user.avatar,\r\n    qr_code:user.qr_code\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/wechat.js","/**\r\n * 负责和微信打交道控制器\r\n */\r\nimport { parse as urlParse } from 'url'\r\nimport { parse as queryParse } from 'querystring'\r\nimport config from '../config'\r\nimport api from '../api'\r\n\r\nexport async function signature (ctx, next) {\r\n  let url = ctx.query.url\r\n\r\n  if (!url) ctx.throw(404)\r\n\r\n  url = decodeURIComponent(url)\r\n\r\n  const params = await api.wechat.getSignatureAsync(url)\r\n\r\n  ctx.body = {\r\n    success: true,\r\n    data: params\r\n  }\r\n}\r\n\r\nexport async function redirect (ctx, next) {\r\n  const target = config.SITE_ROOT_URL + '/oauth'\r\n  console.log(target+'域名')\r\n  const scope = 'snsapi_privateinfo'\r\n  const { visit, id } = ctx.query\r\n  const params = id ? `${visit}_${id}` : visit\r\n  const url = api.wechat.getAuthorizeURL(scope, target, params)\r\n  ctx.redirect(url)\r\n}\r\n\r\nexport async function oauth (ctx, next) {\r\n  let url = ctx.query.url\r\n  console.log(url)\r\n  url = decodeURIComponent(url)\r\n\r\n  const urlObj = urlParse(url)\r\n  const params = queryParse(urlObj.query)\r\n  const code = params.code\r\n  const user = await api.wechat.getUserByCode(code)\r\n  ctx.session.user = user\r\n  ctx.body = {\r\n    success: true,\r\n    data: user\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/wechat.js","import fs from 'fs'\r\n\r\nvar Promise=require('bluebird');\r\n\r\nexports.readFileAsync=function(fpath){\r\n\treturn new Promise(function(resolve,reject){\r\n\t\tfs.readFile(fpath,function(err,content){\r\n\t\t\tif(err){reject(err)}\r\n\t\t\t\telse{resolve(content)}\r\n\t\t});\r\n\t});\r\n};\r\nexports.writeFileAsync=function(fpath,content){\r\n\treturn new Promise(function(resolve,reject){\r\n\t\tfs.writeFile(fpath,content,function(err){\r\n\t\t\tif(err){reject(err)}\r\n\t\t\t\telse{resolve()}\r\n\t\t});\r\n\t});\r\n};\n\n\n// WEBPACK FOOTER //\n// ./server/libs/util.js","import api from '../api'\r\n\r\n\r\n//获取所有的人员,批量添加到企业微信的通讯录中\r\nconst transliteration =require('transliteration')\r\n\r\nexport const getAllUsers =async()=>{\r\n     let page =1\r\n     const base =`http://localhost:2437/`\r\n     //const url = `http://jgjzkj.rjtms.com/api/sys/user/Get?UserName=&UserCode=&OrgName=&UserType=&DepartmentTitle=&page=${page}&rows=20`\r\n     const url =`${base}api/sys/user/Get?UserName=&UserCode=&OrgName=&UserType=&DepartmentTitle=&page=${page}&rows=70`\r\n    \r\n     const username =`super`\r\n     let map =[]\r\n     let dep =[]\r\n     let form =[]\r\n     const data =await api.project.GetAllStaff(url,username,form)\r\n     console.log(`共拿到${data.rows.length}条数据`)\r\n     if(data.rows.length>0){\r\n        data.rows.forEach((item,index) => {\r\n            //transliteration.slugify(item.UserName)\r\n            map.push({\r\n\r\n            })\r\n         });\r\n     }else {\r\n         console.log('已经抓取全部数据')\r\n     }\r\n     console.log('清洗之后数据')\r\n     console.log(map.length)\r\n     \r\n}\r\n\r\nexport const createDep = async() =>{\r\n    let page =1\r\n    const username =`super`\r\n    let form =[]\r\n    const base =`http://localhost:2437/`\r\n    //const url = `http://jgjzkj.rjtms.com/api/sys/user/Get?UserName=&UserCode=&OrgName=&UserType=&DepartmentTitle=&page=${page}&rows=20`\r\n    const url =`${base}api/sys/user/Get?UserName=&UserCode=&OrgName=&UserType=&DepartmentTitle=&page=${page}&rows=70`\r\n    let dep =[]\r\n\r\n\r\n    console.log('开始抓取数据')\r\n\r\n    const data =await api.project.GetAllStaff(url,username,form)\r\n    if(data.rows.length>0){\r\n        data.rows.forEach((item,index)=>{\r\n            if(item.OrgName==='上海建顾减震科技有限公司'){\r\n                //console.log('不用管')\r\n            }else {\r\n                dep.forEach((item,index)=>{\r\n                    if(item.name===item.OrgName){\r\n                    }else {\r\n                        dep.push({\r\n                            \"name\":item.OrgName,\r\n                            \"parentid\":1\r\n                        })\r\n                    }\r\n               })\r\n            }\r\n        })\r\n      //  page++\r\n    }else {\r\n        console.log('已经抓取全部数据')\r\n    }\r\n    console.log(dep)\r\n    return dep\r\n}\r\n\r\n\r\nexport const  clearDepData =async (depName,depMap) =>{\r\n    depMap.forEach((item,index)=>{\r\n        if(item.name===depName){\r\n            return true\r\n        }else {\r\n            return false\r\n        }\r\n   })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/node-script/staff.js","var Promise=require('bluebird')\r\nvar request=Promise.promisify(require('request'))\r\nvar util=require('./util.js')\r\nvar fs=require('fs')\r\nvar menu =require('../wechat/menu')\r\nvar crypto = require('crypto')\r\n//https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=ID&corpsecret=SECRECT\r\nvar prefix='https://qyapi.weixin.qq.com/cgi-bin/';\r\nvar api={\r\n\taccessToken:prefix+'gettoken?',\r\n\tusers:{\r\n\t\tcreate:prefix+'user/create?',\r\n\t\tget:prefix+'user/get?',\r\n\t\tupdate:prefix+'user/update?',\r\n\t\tdel:prefix+'user/delete?',\r\n\t\tdellist:prefix+'user/batchdelete?',\r\n\t\tgetdepartment:prefix+'user/simplelist?',\r\n    getdepartmentdetail:prefix+'user/list'\r\n\t},\r\n\tdepartment:{\r\n        create:prefix+'department/create?',\r\n        update:prefix+'department/update?',\r\n        del:prefix+'department/delete?',\r\n        get:prefix+'department/list?'\r\n\t},\r\n\ttag:{\r\n        create:prefix+'tag/create?',\r\n        update:prefix+'tag/update?',\r\n        del:prefix+'tag/delete?',\r\n        getUsers:prefix+'tag/get?',\r\n        addUsers:prefix+'tag/addtagusers?',\r\n        delUsers:prefix+'tag/deltagusers',\r\n        getlist:prefix+'tag/list?'\r\n\t},\r\n\tmenu:{\r\n      create:prefix+'menu/create?',\r\n      get:prefix+'menu/get?',\r\n      del:prefix+'menu/delete?'\r\n\t},\r\n\tsend:prefix+'message/send?',\r\n\tmedia:{\r\n\t\tupload:prefix+'media/upload?',\r\n\t\tget:prefix+'media/get?'\r\n\t},\r\n\r\n};\r\nfunction Wechat(opts){\t\r\n    // var that=this;\r\n    console.log(opts)\r\n\t this.corpid=opts.corpid;\r\n\t this.secret=opts.secret;\r\n\t this.agentId =opts.agentId;\r\n\t this.appsecret =opts.appsecret;\r\n\t this.getAccessToken=opts.getAccessToken;\r\n\t this.saveAccessToken=opts.saveAccessToken;\r\n\t this.getTicket=opts.getTicket;\r\n\t this.saveTicket=opts.saveTicket;//encodingaeskey\r\n\t this.encodingaeskey =opts.encodingaeskey;\r\n\t this.token =opts.token;\r\n\t this.fetchAccessToken();\r\n\t this.fetchTicket();\r\n\r\n\t //验证开发者服务器\r\n\t this.aesKey = new Buffer(opts.encodingaeskey + '=', 'base64');\r\n     this.iv = this.aesKey.slice(0, 16);\r\n\r\n};\r\nWechat.prototype.PKCS7Decoder =function(buff){\r\n    var pad = buff[buff.length - 1];\r\n    if (pad < 1 || pad > 32) {\r\n      pad = 0;\r\n    }\r\n    return buff.slice(0, buff.length - pad);\r\n}\r\n/**\r\n * [timestamp 时间戳函数]\r\n * @Author   leibo\r\n * @DateTime 2017-09-27\r\n * @param    {[type]}   delay [description]\r\n * @return   {[type]}         [description]\r\n */\r\nWechat.prototype.timestamp =function(delay){\r\n       delay =Number(delay)||0;\r\n       return parseInt(new Date().valueOf() / 1000) + delay * 1000;\r\n}\r\n\r\n /**\r\n  * [encrypt 给响应下消息进行加密]\r\n  * @Author   leibo\r\n  * @DateTime 2017-09-27\r\n  * @param    {[xml]}   xmlMsg [要加密的消息]\r\n  * @return   返回加密的密文\r\n  */\r\nWechat.prototype.encrypt =function(xmlMsg){\r\n    var random16 = crypto.pseudoRandomBytes(16);\r\n    var msg = new Buffer(xmlMsg);\r\n    var msgLength = new Buffer(4);\r\n    msgLength.writeUInt32BE(msg.length, 0);\r\n    var corpid = new Buffer(this.corpid);\r\n    var rawMsg = Buffer.concat([random16, msgLength, msg, corpid]);\r\n    var cipher = crypto.createCipheriv('aes-256-cbc', this.aesKey, this.iv);\r\n    var cipheredMsg = Buffer.concat([cipher.update(rawMsg), cipher.final()]);\r\n\r\n    return cipheredMsg.toString('base64');\r\n}\r\n\r\n/**\r\n * [decrypr  接收用户的消息进行解密]\r\n * @Author   leibo\r\n * @DateTime 2017-09-27\r\n * @param    {[type]}   echostr [description]\r\n * @return   返回解密后明文\r\n */\r\nWechat.prototype.decrypr =function(echostr){\r\n    var aesCipher = crypto.createDecipheriv(\"aes-256-cbc\", this.aesKey, this.iv);\r\n    aesCipher.setAutoPadding(false);\r\n    var decipheredBuff = Buffer.concat([aesCipher.update(echostr,'base64'), aesCipher.final()]);\r\n    decipheredBuff = this.PKCS7Decoder(decipheredBuff);\r\n    var len_netOrder_corpid = decipheredBuff.slice(16);\r\n    var msg_len = len_netOrder_corpid.slice(0, 4).readUInt32BE(0);\r\n    var result = len_netOrder_corpid.slice(4, msg_len + 4).toString();\r\n    \r\n   return result; // 返回一个解密后的明文\r\n}\r\n/**\r\n * [getSignature description]\r\n * @Author   leibo\r\n * @DateTime 2017-09-27\r\n */\r\nWechat.prototype.getSignature =function(token,timestamp,nonce,echostr){\r\n    var key =  [token, timestamp, nonce, echostr].sort().join('');\r\n    var sha1 = crypto.createHash('sha1');\r\n    sha1.update(key);\r\n    return sha1.digest('hex');\r\n}\r\n//验证此次的消息是微信服务器发送的\r\nWechat.prototype.verifyURL =function(signature, token, timestamp, nonce, echostr){\r\n\treturn this.getSignature(token, timestamp, nonce, echostr) == signature;\r\n}\r\n/**\r\n * [encryptMsgs 消息加密]\r\n * @Author   leibo\r\n * @DateTime 2017-09-27\r\n * @return   {[xml]}   返回给微信服务器\r\n */\r\nWechat.prototype.encryptMsgs =function(replyxml,opts){\r\n   var options =opts||{};\r\n   var encrypt =this.encrypt(replyxml);\r\n   var nonce =options.nonce||parseInt((Math.random()*100000000000),10);\r\n   var timestamp =this.timestamp();\r\n   var msgsignature =this.getSignature(this.token,timestamp,nonce,encrypt);\r\n    var resxml = `\r\n      <xml>\r\n        <Encrypt><![CDATA[${encrypt}]]></Encrypt>\r\n        <MsgSignature><![CDATA[${msgsignature}]]></MsgSignature>\r\n        <TimeStamp>${timestamp}</TimeStamp>\r\n        <Nonce><![CDATA[${nonce}]]></Nonce>\r\n      </xml>\r\n    `;\r\n    return resxml;\r\n}\r\n//消息解密\r\nWechat.prototype.decryptMsg =function(msgSignature,token,timestamp,nonce,echostr){\r\n    var msgencrypt =echostr.Encrypt;\r\n     if (this.getSignature(token, timestamp, nonce, msgencrypt) != msgSignature) {\r\n      console.log('消息签名不一致');\r\n      return false;\r\n    }\r\n    var decryptedMsg =this.decrypr(msgencrypt);\r\n   // return parseXML(decryptedMsg,{explicitArray:false});\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//获取access_token\r\nWechat.prototype.fetchAccessToken=function(){\r\n\tvar that=this;\r\n\treturn new Promise(function(resolve,reject){\r\n          \r\n\t\tif(that.access_token&&that.expires_in){\r\n\t\t\tif(that.isValidAccessToken(that)){\r\n\t\t\t\t//access_token合法向下传递\r\n\t\t\t\tresolve(that);\r\n\t\t\t}\r\n\t\t}\r\n        //重新获取access_token\r\n\t\tthat.getAccessToken().then(function(data){\r\n\t\t \ttry{\r\n\t\t \t\tdata=JSON.parse(data)\r\n\t\t \t}catch(e){\r\n\t\t \t\treturn that.updateAccessToken();\r\n\t\t \t}\r\n\t\t \tif(that.isValidAccessToken(data)){\r\n\t\t \t\treturn Promise.resolve(data);\r\n\t\t \t}else{\r\n\t\t \t\treturn that.updateAccessToken();\r\n\t\t \t}\r\n\t\t }).then(function(data){\r\n\t\t \tthat.saveAccessToken(data);\r\n\t\t \t//access_token合法向下传递\r\n\t\t \tresolve(data);\r\n\t\t \t\r\n\t\t })\r\n\t})\r\n\r\n}\r\n//获取消息权限的access_token\r\nWechat.prototype.fetchTicket=function(access_token){\r\n    var that=this;\r\n\treturn new Promise(function(resolve,reject){\r\n\r\n\t\tthat.getTicket().then(function(data){\r\n\t\t \ttry{\r\n\t\t \t\tdata=JSON.parse(data)\r\n\t\t \t}catch(e){\r\n\t\t \t\treturn that.updateTicket(access_token);\r\n\t\t \t}\r\n\t\t \tif(that.isValidTicket(data)){\r\n\t\t \t\treturn Promise.resolve(data);\r\n\t\t \t}else{\r\n\t\t \t\treturn that.updateTicket(access_token);\r\n\t\t \t}\r\n\t\t }).then(function(data){\r\n\t\t \tthat.saveTicket(data);\r\n\t\t \t\r\n\t\t \tresolve(data);\r\n\t\t \t\r\n\t\t })\r\n\t})\r\n\r\n}\r\n\r\n//添加成员\r\nWechat.prototype.createUser=function(form){ \r\n   var that =this;\r\n   return new Promise(function(resolve,reject){\r\n\t\tthat.fetchAccessToken().then(function(data){\r\n\t\t    var url =api.users.create+\"access_token=\"+data.access_token;\r\n\t\t\t request({method:'POST',url:url,body:form,json:true}).then(function(response){\r\n                   \r\n\t\t\t });\r\n\t\t})\r\n\t});\r\n}\r\n\r\n//读取成员\r\nWechat.prototype.getUser =function(userid){\r\n\tvar that =this;\r\n    return new Promise(function(resolve,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n        \tvar url =api.users.get+\"access_token=\"+data.access_token+'&userid='+userid;\r\n             request({method:'POST',url:url,json:true}).then(function(response){\r\n                      resolve(response.body)\r\n             });\r\n        })\r\n    })\r\n}\r\n\r\n//更新成员\r\nWechat.prototype.updateUser =function(form){\r\n   var that =this;\r\n   return new Promise(function(resolve,reject){\r\n       that.fetchAccessToken().then(function(data){\r\n       \t   var url =api.users.update+\"access_token=\"+data.access_token;\r\n           request({method:'POST',url:url,body:form,json:true}).then(function(response){\r\n                 console.log(response.body);\r\n           });\r\n       })\r\n   })\r\n}\r\n\r\n//删除成员\r\nWechat.prototype.delUser =function(userid){\r\n   var that =this;\r\n   return new Promise(function(resolve,reject){\r\n       that.fetchAccessToken().then(function(data){\r\n         \tvar url =api.users.get+\"access_token=\"+data.access_token+'&userid='+userid;\r\n            request({method:'POST',url:url,json:true}).then(function(response){\r\n                  console.log(response.body);\r\n            });\r\n       })\r\n   })\r\n}\r\n//批量删除成员\r\nWechat.prototype.delUserList =function(useridlist){\r\n   var that =this;\r\n   return new Promise(function(resolve,reject){\r\n      that.fetchAccessToken().then(function(data){\r\n           var url =api.users.dellist+\"access_token=\"+data.access_token;\r\n\t       request({method:'POST',url:url,json:true}).then(function(response){\r\n\t            console.log(response.body);\r\n\t       })\r\n      })\r\n   })\r\n}\r\n\r\n//获取部门成员\r\nWechat.prototype.getDepartment =function(depid,fetch){ \r\n   var that=this;\r\n   return new Promise(function(resolve,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n            var url =api.users.getdepartment+\"access_token=\"\r\n            +data.access_token+'&department_id='+depid+'&fetch_child='+fetch;\r\n            request({method:'POST',url:url,json:true}).then(function(response){\r\n            \tconsole.log(response.body);\r\n            })\r\n        })\r\n   })\r\n}\r\n\r\n//获取部门成员详情\r\nWechat.prototype.getDepartmentdetail =function(){\r\n\r\n}\r\n\r\n//创建部门\r\nWechat.prototype.createDep =function(form){\r\n\tvar that =this;\r\n\treturn new Promise(function(resolve,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n             var url =api.department.create+\"access_token=\"+data.access_token;\r\n             request({method:'POST',url:url,body:form,json:true}).then(function(response){\r\n                  console.log(response.body);\r\n             })\r\n        }) \r\n\t})\r\n}\r\n\r\n//更新部门\r\nWechat.prototype.updateDep =function(form){\r\n\tvar that =this;\r\n\treturn new Promise(function(resolve,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n            var url =api.department.update+\"access_token=\"+data.access_token;\r\n            request({method:'POST',url:url,form:form,json:true}).then(function(response){\r\n                    console.log(response.body);\r\n            })\r\n        })\r\n\r\n\t})\r\n}\r\n\r\n//删除部门\r\nWechat.prototype.delDep =function(depid){\r\n    var that =this;\r\n    return new Promise(function(resolve,reject){\r\n    \tthat.fetchAccessToken().then(function(data){\r\n             var url =api.department.del+'access_token='+data.access_token+'&id'+depid;\r\n             request({method:'POST',url:url,json:true}).then(function(response){\r\n                  console.log(response.body);\r\n             });\r\n    \t})\r\n    })\r\n}\r\n\r\n//获取部门列表\r\nWechat.prototype.getDep =function(depid){\r\n    var that =this;\r\n    return new Promise(function(resolve,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n             var url =api.department.get +\"access_token=\"+data.access_token+\"&id=\"+depid;\r\n             request({method:'POST',url:url,json:true}).then(function(response){\r\n                  console.log(response.body.errmsg);\r\n                   console.log(response.body);\r\n             });\r\n        })\r\n    })\r\n}\r\n\r\n\r\n//创建标签\r\nWechat.prototype.createTag =function(form){\r\n\tvar that =this;\r\n\treturn new Promise(function(resolve,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n            var url =api.tag.create+'access_token='+data.access_token;\r\n            request({method:'POST',url:url,json:true}).then(function(response){\r\n                console.log(response.body); \r\n            });\r\n        });\r\n\t})\r\n}\r\n\r\n//修改标签\r\nWechat.prototype.updateTag =function(form){\r\n    var that =this;\r\n    return new Promise(function(response,reject){\r\n        that.fetchAccessToken().then(function(data){\r\n        \t var url =api.tag.update+'access_token='+data.access_token;\r\n             request({method:'POST',url:url,json:true}).then(function(response){\r\n                 console.log(response.body);\r\n             })\r\n        })\r\n    })\r\n}\r\n\r\n//删除标签\r\nWechat.prototype.delTag =function(tagid){\r\n   var that =this;\r\n   return new Promise(function(response,reject){\r\n       that.fetchAccessToken().then(function(data){\r\n           var url =api.tag.del+\"access_token=\"+data.access_token+'&tagid='+tagid;\r\n           request({method:'POST',url:url,json:true}).then(function(response){\r\n               console.log(response.body);\r\n           });\r\n       })\r\n   })\r\n}\r\n\r\n//获取标签成员\r\nWechat.prototype.getUserbyTag  =function(tagid){\r\n  var that =this;\r\n  return new Promise(function(response,reject){\r\n      that.fetchAccessToken().then(function(data){\r\n          var url =api.tag.getUsers+'access_token='+data.access_token+'&tagid='+tagid;\r\n          request({method:'POST',url:url,json:ture}).then(function(response){\r\n               console.log(response.body);\r\n          })\r\n      })\r\n  })\r\n}\r\n\r\n//增加标签成员\r\nWechat.prototype.addUsersByTag =function(){\r\n\t\r\n}\r\n\r\n//创建菜单\r\nWechat.prototype.createMenu =function(menu){\r\n\tvar that =this;\r\n\t var agentId =that.agentId;\r\n\treturn new Promise(function(resolve,reject){\r\n        that.fetchTicket().then(function(data){\r\n        \t\r\n             var url =api.menu.create +'access_token='+data.access_token+'&agentid='+agentId;\r\n             request({method:'POST',url:url,body:menu,json:true}).then(function(response){\r\n                 resolve(response)\r\n             },(err)=>{\r\n                   reject(err)\r\n             });\r\n        });\r\n\t});\r\n};\r\n\r\n//删除菜单\r\nWechat.prototype.delMenu =function(){\r\n   var that =this;\r\n   var agentId =that.agentId;\r\n       return new Promise(function(resolve,reject){\r\n          that.fetchTicket().then(function(data){\r\n          \r\n             var url =api.menu.del +'access_token='+data.access_token+'&agentid='+agentId;\r\n             request({method:'GET',url:url,json:true}).then(function(response){\r\n                resolve(response)\r\n             },(err)=>{\r\n                 reject(err)\r\n             });\r\n        });\r\n  });\r\n}\r\n\r\n\r\n//推送消息\r\nWechat.prototype.sendMessgae =function(reply){\r\n    var that =this;\r\n    return new Promise(function(resolve,reject){\r\n     var msg =util.sendtpl(reply);\r\n     console.log(msg)\r\n    that.fetchTicket().then(function(data){\r\n           var url =api.send +\"access_token=\"+data.access_token;\r\n           request({method:'POST',url:url,body:msg,json:true}).then(function(response){\r\n               console.log(response.body);\r\n           })\r\n    \t})\r\n    })\r\n}\r\n\r\n//发送图文消息\r\nWechat.prototype.Mpnews =function(username,reply){\r\n\t var that =this;\r\n\t return new Promise(function(resolve,reject ){\r\n             var msg ={\r\n                 \"touser\":username,\r\n                 \"toparty\" : \"@all\",\r\n                 \"totag\" : \"@all\",\r\n                 \"msgtype\" : \"news\",\r\n                 \"agentid\" : 1000002,\r\n                 \"news\" : {\r\n                    \"articles\" : [\r\n                       {\r\n                           \"title\" :reply.title,\r\n                           \"description\" : reply.description,\r\n                           \"url\" : reply.url,\r\n                           \"picurl\" : reply.picurl,\r\n                           \"btntxt\":\"详情\"\r\n                       }\r\n                    ]\r\n               }\r\n             }\r\n\t\t\tthat.fetchTicket().then(function(data){\r\n                var url =api.send +\"access_token=\"+data.access_token;\r\n\t\t        request({method:'POST',url:url,body:msg,json:true}).then(function(response){\r\n\t\t               console.log(response.body);\r\n\t\t        });\r\n\t\t\t});\r\n\t });\r\n}\r\n\r\n//发送卡片消息\r\nWechat.prototype.sendMessgaebycard  =function(username,reply){\r\n    var that =this;\r\n    return new Promise(function(resolve,reject){\r\n        var msg ={\r\n             \"touser\":username,\r\n             \"msgtype\":\"textcard\",\r\n             \"agentid\":1000002,\r\n             \"textcard\" : {\r\n                      \"title\" :reply.title ,\r\n                      \"description\":reply.description,\r\n                      \"url\":reply.url,\r\n                      \"btntxt\":\"详情\"\r\n             }\r\n        };\r\n    that.fetchTicket().then(function(data){\r\n           var url =api.send +\"access_token=\"+data.access_token;\r\n           request({method:'POST',url:url,body:msg,json:true}).then(function(response){\r\n               console.log(response.body);\r\n           })\r\n      })\r\n      \r\n    })\r\n}\r\n\r\n\r\n//发送文本文本消息\r\nWechat.prototype.sendMessgaebyText =function(username,content){\r\n    var that =this;\r\n    return new Promise(function(resolve,reject){\r\n        var msg ={\r\n       \"touser\":username,\r\n       \"toparty\" : \"@all\",\r\n       \"totag\" : \"@all\",\r\n       \"msgtype\" : \"text\",\r\n       \"agentid\" :1000002,\r\n       \"text\" : {\r\n           \"content\" : content\r\n       },\r\n       \"safe\":0\r\n    };\r\n    that.fetchTicket().then(function(data){\r\n           var url =api.send +\"access_token=\"+data.access_token;\r\n           request({method:'POST',url:url,body:msg,json:true}).then(function(response){\r\n               console.log(response.body);\r\n           })\r\n      })\r\n      \r\n    })\r\n}\r\n\r\n\r\n\r\n//获取用户信息\r\nWechat.prototype.getUserInfo=function(openId){\r\n\tvar that=this;\r\n\treturn new Promise(function(resolve,reject){\r\n\t\tthat.fetchAccessToken().then(function(data){\t\r\n\t\t\tvar url=api.user.getUser+\"access_token=\"+data.access_token\r\n\t\t\t\t+'&openid'+openId+'&lang=zh_CN';\r\n\t\t\t\r\n\t\t\trequest({url:url,json:true})\r\n\t\t\t.then(function(response){\r\n\t\t\t\t var _data=response.body;\r\n\t\t\t\tconsole.log(_data)\r\n\t\t\t\tresolve(_data);\r\n\t\t\t})\r\n\t\t})\r\n\t});\r\n};\r\nWechat.prototype.isValidAccessToken=function(data){\r\n\tif(!data||!data.access_token||!data.expires_in){\r\n\t\treturn false\r\n\t}else{\r\n\t\tvar access_token=data.access_token;\r\n\t\tvar expires_in=data.expires_in;\r\n\t\tvar now=(new Date().getTime());\r\n\t\tif(now<expires_in){\r\n\t\t\treturn true\r\n\t\t}else{\r\n\t\t\treturn false\r\n\t\t}\t\r\n\t}\r\n};\r\n\r\nWechat.prototype.isValidTicket=function(data){\r\n\tif(!data||!data.ticket||!data.expires_in){\r\n\t\treturn false\r\n\t}else{\r\n\t\tvar ticket=data.ticket;\r\n\t\tvar expires_in=data.expires_in;\r\n\t\tvar now=(new Date().getTime());\r\n\t\tif(ticket&&now<expires_in){\r\n\t\t\treturn true\r\n\t\t}else{\r\n\t\t\treturn false\r\n\t\t}\t\r\n\t}\r\n};\r\nWechat.prototype.updateAccessToken=function(){\r\n\tvar corpid=this.corpid;\r\n\tvar secret=this.secret;\r\n\tvar url=api.accessToken+'corpid='+corpid+'&corpsecret='+secret;\r\n\treturn new Promise(function(resolve,reject){\r\n\r\n\t\trequest({url:url,json:true}).then(function(response){\r\n\t\t\t var data=response.body;\r\n\t\t\tvar now=(new Date().getTime());\r\n\t\t\tvar expires_in=now+(data.expires_in-20)*1000;\r\n\t\t\tdata.expires_in=expires_in;\r\n\t\t\tresolve(data)\r\n\t\t})\r\n\t});\r\n\t\r\n}\r\n\r\nWechat.prototype.updateTicket=function(access_token){\r\n\t    var appsecret =this.appsecret;\r\n\t    var corpid =this.corpid;\r\n\t\tvar url=api.accessToken+'corpid='+corpid+'&corpsecret='+appsecret;\r\n      return new Promise(function(resolve,reject){\r\n\r\n\t\trequest({url:url,json:true}).then(function(response){\r\n\t\t\t var data=response.body;\r\n\t\t\tvar now=(new Date().getTime());\r\n\t\t\tvar expires_in=now+(data.expires_in-20)*1000;\r\n\t\t\tdata.expires_in=expires_in;\r\n\t\t\tresolve(data)\r\n\t\t})\r\n\t});\r\n\t\r\n}\r\n//回复消息\r\nWechat.prototype.reply=function(){\r\n   var msgEncrypt =this.msgEncrypt;\r\n \r\n}\r\nmodule.exports=Wechat;\n\n\n// WEBPACK FOOTER //\n// ./server/wechat-lib/index.js","import sha1 from 'sha1'\r\nimport getRawBody from 'raw-body'\r\nimport * as util from './util'\r\nimport xml2js from 'xml2js'\r\nimport { getWechat }  from '../wechat/index'\r\nconst Wechat  =require('../wechat/index')\r\n\r\n\r\nexport default function (opts,reply){\r\n\tconst wechat= getWechat()\r\n\treturn async function wechatMiddle(ctx,next) {\r\n\t\tconst token =opts.token\r\n\t\tconst msg_signature =ctx.query.msg_signature\r\n\t\tconst nonce =ctx.query.nonce\r\n\t\tconst encodingaeskey =opts.encodingaeskey\r\n\t\tconst timestamp =ctx.query.timestamp\r\n\t\tconst echostr =ctx.query.echostr\r\n\r\n\t\tconst str =[token,timestamp,nonce,encodingaeskey].sort().join('');\r\n\r\n\t\tif(ctx.method==='GET'){\r\n\t\t\tconsole.log('验证服务器')\r\n\t\t\tif(wechat.verifyURL(msg_signature,token,timestamp,nonce,echostr)){\r\n\t\t\t\t let a =wechat.decrypr(echostr)\r\n\t\t\t\t ctx.body =a\r\n\t\t\t}else {\r\n\t\t\t\tctx.body  =\"wang:不是微信服务器\"\r\n\t\t\t}\r\n\t\t}else if(ctx.method==='POST') {\r\n\t\t\r\n\t\t\tconst data =await getRawBody(ctx.req,{\r\n\t\t\t\t\tlength:ctx.length,\r\n\t\t\t\t\tlimit:\"1mb\",\r\n\t\t\t\t\tencoding:ctx.charset\r\n\t\t\t})\r\n\r\n\t\t\tvar content=await util.parseXMLAsync(data)\r\n\t\t\t//对消息解密 Encrypt\r\n\t\t\tconsole.log(content);\r\n\t\t\tconsole.log(content.xml.Encrypt[0])\r\n\t\t\tvar xmlmsg = wechat.decrypr(content.xml.Encrypt[0])\r\n\t\t\tconsole.log(xmlmsg)\r\n\t\t\tvar json=\"\";\r\n\t\t\txml2js.parseString(xmlmsg,{trim:true},function(err,content){\r\n\t\t\t\tjson =content;\r\n\t\t\t});\r\n\t\t\tvar message=util.formatMessage(json.xml);//把用户消息抓转为json\r\n\t\t\tctx.weixin =message;//挂载到this上\r\n\t\t\tconsole.log(message);\r\n\t\t\tawait reply.apply(ctx,[ctx,next]);\r\n\t\t\tconst replyBody =ctx.body\r\n\t\t\tconst msg =ctx.weixin\r\n\t\t\tconst xml =util.tpl(replyBody,msg)\r\n\t\t\tconst msgEncrypt =wechat.encryptMsgs(xml)\r\n\t\t\tvar opt={\r\n\t\t\t\tnonce:nonce\r\n\t\t    };\r\n\t\t\t ctx.status =200;\r\n\t\t\t ctx.type='application/xml';\r\n\t\t\t ctx.body=msgEncrypt;\r\n\t\t  }\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/wechat-lib/middleware.js","import request from 'request-promise'\r\n\r\nconst api ={\r\n    AuthorizeUrl:`https://open.weixin.qq.com/connect/oauth2/authorize?`,\r\n    AccessTokenUrl:'https://qyapi.weixin.qq.com/cgi-bin/gettoken',\r\n    UserInfoUrl:'https://qyapi.weixin.qq.com/cgi-bin/user/getuserdetail?',\r\n    getUser:'https://qyapi.weixin.qq.com/cgi-bin/user/getuserinfo?'\r\n}\r\n\r\nexport default class  workOAuth {\r\n    constructor(opts){\r\n        this.corpId =opts.corpid\r\n        this.corpSecret =opts.appsecret\r\n        this.agentId =opts.agentId\r\n\r\n    }\r\n    async request(options) {\r\n        options =Object.assign({},options,{json:true})\r\n\r\n        try{\r\n            const response =await request(options)\r\n            return response\r\n        }catch(error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    getAuthorizeUrl(scope='snsapi_privateinfo',target,state) {\r\n        const url =`${api.AuthorizeUrl}appid=${this.corpId}&redirect_uri=${encodeURIComponent(target)}&response_type=code&scope=${scope}&agentid=${this.agentId}&state=${state}#wechat_redirect`\r\n        return url\r\n    }\r\n\r\n    async  fetchAccessToken(access_token,code) {\r\n        const url =`${api.getUser}access_token=${access_token}&code=${code}`\r\n        const data =await this.request({url:url})\r\n        return data\r\n    }\r\n\r\n    async fetchUserInfo(access_token,user_ticket){\r\n        const url =`${api.UserInfoUrl}access_token=${access_token}`\r\n        const options ={\r\n            method:'POST',\r\n            url:url,\r\n            body:{\r\n                \"user_ticket\":user_ticket\r\n            }\r\n        }\r\n        const data =await this.request(options)\r\n        return data\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n \n\n\n// WEBPACK FOOTER //\n// ./server/wechat-lib/oauth.js","var ejs=require('ejs');\r\nvar heredoc=require('heredoc');\r\n\r\nvar tpl=heredoc(function(){/*\r\n\t<xml>\r\n\t<ToUserName><![CDATA[<%= toUserName %>]]></ToUserName>\r\n\t<FromUserName><![CDATA[<%= fromUserName %>]]></FromUserName>\r\n\t<CreateTime><%= createTime%></CreateTime>\r\n\t<MsgType><![CDATA[<%= msgType %>]]></MsgType>\r\n\t<% if(msgType==='text') {%>\r\n\t<Content><![CDATA[<%= content%>]]></Content>\r\n\t<%} else if(msgType==='image') {%>\r\n\t<Image>\r\n\t<MediaId><![CDATA[<%= content.mediaId%>]]></MediaId>\r\n\t</Image>\r\n\t<%} else if(msgType==='voice') {%>\r\n\t<Voice>\r\n\t<MediaId><![CDATA[<%= content.mediaId %>]]></MediaId>\r\n\t</Voice>\r\n\t<%} else if(msgType==='video') {%>\r\n\t<Video>\r\n\t<MediaId><![CDATA[<%= content.mediaId%>]]></MediaId>\r\n\t<Title><![CDATA[<%= content.title%>]]></Title>\r\n\t<Description><![CDATA[<%= content.description %>]]></Description>\r\n\t</Video>\r\n\t<%} else if(msgType==='music') {%>\r\n\t<Music>\r\n\t<Title><![CDATA[<%= content.title%>]]></Title>\r\n\t<Description><![CDATA[<%= content.description %>]]></Description>\r\n\t<MusicUrl><![CDATA[<%= content.musicUrl %>]]></MusicUrl>\r\n\t<HQMusicUrl><![CDATA[<%= content.hqMusicUrl %>]]></HQMusicUrl>\r\n\t<ThumbMediaId><![CDATA[<%= content.mediaId%>]]></ThumbMediaId>\r\n\t</Music>\r\n\t<%} else if(msgType==='news') {%>\r\n\t<ArticleCount><%= content.length%></ArticleCount>\r\n\t<Articles>\r\n\t<% content.forEach(function(item){%>\r\n\t<item>\r\n\t<Title><![CDATA[<%= item.title%>]]></Title> \r\n\t<Description><![CDATA[<%=item.description%>]]></Description>\r\n\t<PicUrl><![CDATA[<%= item.picUrl%>]]></PicUrl>\r\n\t<Url><![CDATA[<%= item.url%>]]></Url>\r\n\t</item>\r\n\t<% }) %>\r\n\t</Articles>\r\n\t<% } %>\r\n\t\r\n\t</xml>\r\n*/});\r\n//  \"toparty\":\"@all\",\r\n//\"totag\":\"@all\",\r\nvar tplmsg =heredoc(function(){/*\r\n\t{\r\n\t   \"touser\":\"<%= touser%>\",\r\n\t \r\n\t   \"msgtype\":\"<%= msgType%>\",\r\n\t   \"agentid\":1000002,\r\n\t   <% if(msgType==='text'){%>\r\n\t         \"text\":{\r\n\t             \"content\":\"<%= content%>\"\r\n\t         },\r\n\t         \"safe\":0\r\n\t  <% } else if(msgType==='image'){%>\r\n\t           \"image\":{\r\n\t               \"media_id\":<%= content.media_id%>,\r\n\t          },\r\n\t          \"safe\":0\r\n\t  <% } else if(msgType==='voice'){%>\r\n\t            \"voice\":{\r\n\t                \"media_id\":<%= content.media_id%>,\r\n\t            }\r\n\t  <% } else if(msgType==='file'){%>\r\n\t            \"file\":{\r\n\t                \"media_id\" : \"1Yv-zXfHjSjU-7LH-GwtYqDGS-zz6w22KmWAT5COgP7o\",\r\n\t            }\r\n\t <% } else if(msgType==='news'){%>\r\n\t           \"news\":{\r\n\t                \"articles\":[\r\n                              {\r\n\t                        \"title\":\"<%= content.title%>\",\r\n\t                        \"description\":\"<%= content.description%>\",\r\n\t                        \"url\":\"<%= content.url%>\",\r\n\t                        \"picurl\":\"<%= content.picurl%>\",\r\n\t                        \"btntxt\":\"<%= content.btntxt%>\"\r\n                              }\r\n\t                ]\r\n\t           }\r\n\t <% }else if(msgType==='textcard'){%>\r\n\t        \"textcard\":{\r\n\t             \"title\":<%= title%>,\r\n\t             \"description\":<%= description%>,\r\n\t             \"url\":<%= url%>,\r\n\t             \"btntxt\":<%= btntxt%>\r\n\t        }\r\n\t<% }%>\r\n       }\r\n*/})\r\nvar compiled = ejs.compile(tpl);\r\nvar sendmsg  = ejs.compile(tplmsg);\r\nexports=module.exports={\r\n\tcompiled:compiled,\r\n         sendmsg:sendmsg,\r\n};\n\n\n// WEBPACK FOOTER //\n// ./server/wechat-lib/tpl.js","import api from '../api'\r\nimport config from '../wechat'\r\nimport { getWechat } from '../wechat'\r\nimport wechat_config from '../config' \r\nimport { WSAEALREADY } from 'constants'\r\n\r\n\r\nconst path = require(\"path\")\r\nconst querystring = require(\"querystring\")\r\nconst manba =require('manba')\r\nconst menu = require('./menu')\r\nconst sd = require('silly-datetime');\r\nconst transliteration =require('transliteration')\r\n\r\nconst client =getWechat()\r\nconst tip = '欢迎来到建顾管理管理应用,当前版本v1.0.0.\\n'+'1~查询项目请以项目开头跟上空格,项目名称结尾的格式输入.\\n'+'2~文本回复请输入1,2,建顾,以及任意文案\\n'+'3~项目操作请点击下方菜单,点击项目查询,查询到当前用户最新的项目,点击我的项目进入项目列表,点击建顾进入平台首页.\\n'+'4~当前版本v1,您有更好的想法请联系开发者.'\r\n\r\n\r\n// const getAll = async()=>{\r\n// \tconsole.log(api.project.GetAllStaff())\r\n// }\r\n\r\n// getAll()\r\n\r\n\r\n// client.delMenu().then((data)=>{\r\n// \tconsole.log(data)\r\n// })\r\n\r\n// client.createMenu(menu).then((data)=>{\r\n//  \t console.log(data)\r\n// })\r\n\r\n//client.createMenu(menu).then(()=>{\r\n//\tconsole.log('创建成功')\r\n//})\r\n\r\nexport const  reply =async(ctx,next)=> {\r\n\tlet message = ctx.weixin\r\n\tconsole.log(message)\r\n\tlet reply = 'sorry';\r\n\tvar date = manba().format(\"ll\");\r\n\tlet username = message.FromUserName;\r\n\tconsole.log(username)\r\n\tlet person = await client.getUser(username);\r\n\tconsole.log('微信回复')\r\n\tconsole.log(person)\r\n\tlet usercode = person.name;\r\n\tconsole.log(usercode)\r\n\tif (message.MsgType === 'event') {\r\n\t\tif (message.Event === \"subscribe\") {\r\n\t\t\treply = tip\r\n\t\t\tclient.sendMessgaebyText(message.FromUserName, reply);\r\n\t\t} else if (message.Event === 'click') {\r\n\t\t\r\n\t\t\tlet data = null;\r\n\t\t\tlet params ={\r\n\t\t\t\ttypeCode:'0',\r\n\t\t\t\tpage:1,\r\n\t\t\t\trows:10\r\n\t\t\t}\r\n\t\t\tlet title ='商务项目'\r\n\t\t\tif (message.EventKey === 'menu_click_business') {\r\n\t\t\t\tparams['Classification'] ='商务项目'\r\n\t\t\t\tparams[\"typeCode\"] ='2'\r\n\t\t\t} else if (message.EventKey === 'menu_click_design') {\r\n\t\t\t\tparams['Classification'] ='设计项目'\r\n\t\t\t\ttitle ='设计项目'\r\n\t\t\t\tparams[\"typeCode\"] ='1'\r\n\t\t\t}else if(message.EventKey==='menu_click_Ech'){\r\n\t\t\t\tparams[\"HasMark\"] =true\r\n\t\t\t\ttitle ='重点项目'\r\n\t\t\t\tparams[\"typeCode\"] ='3'\r\n\t\t\t}\r\n\t\t\t//console.log(params)\r\n\t\t\tconst result =await api.project.ProjectList(usercode,params)\r\n\t\t    console.log(result)\r\n\t\t\tif(result.rows.length>0){\r\n\t\t\t\t let sendMsg =result.rows[0]\r\n\t\t\t\t let projectStatus =sendMsg.HandleStatus\r\n\t\t\t\t console.log(projectStatus)\r\n\t\t\t\t let status =null\r\n\t\t\t\t switch(projectStatus){\r\n\t\t\t\t\t case 0 :\r\n\t\t\t\t\t status  ='待提交'\r\n\t\t\t\t\t break;\r\n\t\t\t\t\t case 1 :\r\n\t\t\t\t\t  status  ='已提交'\r\n\t\t\t\t\t  break;\r\n\t\t\t\t\t case 2 :\r\n\t\t\t\t\t  status  ='已审核'\r\n\t\t\t\t\t  break;\r\n\t\t\t\t }\r\n\t\t\t\t let card ={\r\n\t\t\t\t\t title:'项目查询:'+title,\r\n\t\t\t\t\t description: \"<div class=\\\"gray\\\">查询时间:\"+sd.format(new Date(), 'YYYY-MM-DD')+\"</div> <div class=\\\"normal\\\">项目类型:\"+\r\n\t\t\t\t\t sendMsg.Classification+ \"</div><div class=\\\"highlight\\\">项目名称:\"+sendMsg.ProjectName+\"</div><div class=\\\"highlight\\\">项目状态:\"+status+\"</div>\",\r\n\t\t\t\t\t url:`${wechat_config.SITE_ROOT_URL }/detail?ID=${sendMsg.ID}`\r\n\t\t\t\t }\r\n\t\t\t\t client.sendMessgaebycard(message.FromUserName,card)\r\n\t\t\t}else {\r\n\t\t\t\tlet msg ='您当前没有项目哦'\r\n\t\t\t\tclient.sendMessgaebyText(message.FromUserName, msg);\r\n\t\t\t}\r\n\r\n\t\t}else if(message.Event ==='view') {\r\n\t\t\t//跳转到详情\r\n\t\t}\r\n\r\n\t} else if (message.MsgType === 'text') {\r\n\t\tvar content = message.Content;\r\n\t\treply = `您说的${content}复杂了,我不懂.....`;\r\n\t\tif (content === \"1\") {\r\n\t\t\treply = `你好，欢迎来到建顾项目管理`;\r\n\t\t} else if (content === \"2\") {\r\n\t\t\treply = `Hi, 快去查询我的项目吧`;\r\n\t\t} else if (content === \"建顾\") {\r\n\t\t\treply = `上海建顾减震科技有限公司是一家提供结构减隔震系统解决方案的高科技企业，注册资金为7000万，所涉及的工程领域遍布建筑、桥梁、电力、基础设施、设备、军工、石化、构筑物、新能源等方面。依托于同济大学强大的智库支持，公司拥有本行业超强的技术团队，研发骨干均具有名校博士学位，在结构设计优化咨询、减隔震产品研发、设计及应用等方面积累了深厚的经验，与此配套的精细化的生产制造与工程实施队伍则为解决方案的系统落地提供了切实的保障。公司总部在上海，下设市场、设计、生产、研发、工程等部门，并在新疆、云南建立分公司，西安、武汉、成都、深圳、北京、海南等地设立业务分支机构`;\r\n\t\t} else if(content.indexOf('项目')!==-1){\r\n\t\t\tlet searchText =content.substr(3)\r\n\t\t\tconsole.log(searchText);\r\n\t\t\tlet query ={\r\n\t\t\t\tsearchText:searchText,\r\n\t\t\t\tpage:'1',\r\n\t\t\t\trows:10\r\n\t\t\t}\r\n\t\t\t//console.log(query)\r\n\t\t\tconst projects =await api.project.Search(usercode,query)\r\n\t\t\t//console.log(projects)\r\n\t\t\tconst project =projects.rows[0]\r\n\t\t    if(projects.rows.length>0){\r\n\t\t\t\tlet card ={\r\n\t\t\t\t\ttitle:\"项目查询\",\r\n\t\t\t\t\tdescription: \"<div class=\\\"gray\\\">查询时间:\"+sd.format(new Date(), 'YYYY-MM-DD')+\"</div> <div class=\\\"normal\\\">项目类型:\"+\r\n\t\t\t\t\tproject.Classification+ \"</div><div class=\\\"highlight\\\">项目名称:\"+project.ProjectName+\"</div>\",\r\n\t\t\t\t\turl:`${wechat_config.SITE_ROOT_URL }/detail?ID=${project.ID}`\r\n\t\t\t\t}\r\n\t\t\t\tclient.sendMessgaebycard(message.FromUserName,card)\r\n\t\t\t\treturn ;\r\n\t\t\t}else {\r\n\t\t\t   reply =`没有${searchText}这个项目哦,点击<a href=\"${wechat_config.SITE_ROOT_URL}/project/commit\">添加项目</a>`\t\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\treply = tip\r\n\t\t}\r\n\t    client.sendMessgaebyText(message.FromUserName, reply);\r\n\t} else if (message.MsgType === 'voice') {\r\n\t  //语音识别在企业微信中没有开放,\r\n\t//   const voiceText = message.Recognition\r\n\t//   console.log(voiceText)\r\n\t}\r\n }\r\n\r\n\r\n\r\n\r\n \r\n//为网站调用抛出的接口\r\n//这个地方没有做权限控制,\r\n//解决方式:1.最简单的就是锁定ip,\r\n// 2.添加OAuth协议\r\n\r\nexport const send =async(body)=>{\r\n\tif(body.type==1){//文本消息\r\n\t  const response =  await\tclient.sendMessgaebyText(body.username,body.text);\r\n\t  return response\r\n\t}else if(body.type==2){//卡片消息\r\n\t\t// let card ={\r\n\t\t// \ttitle:\"项目查询\",\r\n\t\t// \tdescription: \"<div class=\\\"gray\\\">查询时间:\"+sd.format(new Date(), 'YYYY-MM-DD')+\"</div> <div class=\\\"normal\\\">项目类型:\"+\r\n\t\t// \tproject.Classification+ \"</div><div class=\\\"highlight\\\">项目名称:\"+project.ProjectName+\"</div>\",\r\n\t\t// \turl:`${wechat_config.SITE_ROOT_URL }/detail?ID=${project.ID}`\r\n\t\t// }\r\n\t   const response =\tawait client.sendMessgaebycard(body.username,body.card)\r\n\t   return response\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/wechat/reply.js","module.exports = require(\"constants\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"constants\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"heredoc\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"heredoc\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"raw-body\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"raw-body\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 41\n// module chunks = 0","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid\"\n// module id = 44\n// module chunks = 0","import Koa from 'koa'\r\nimport { Nuxt, Builder } from 'nuxt'\r\n//import R from 'ramda'\r\nimport { resolve } from 'path'\r\n\r\nimport  { addBody,addSession } from './middlewares/common'\r\nimport { router } from './middlewares/router'\r\nimport { arrayPattern } from 'babel-types';\r\n\r\n\r\n// Import and Set Nuxt.js options\r\nlet config = require('../nuxt.config.js')\r\nconfig.dev = !(process.env.NODE_ENV === 'production')\r\n\r\nconst r = path => resolve(__dirname, path)\r\nconst host = process.env.HOST || '127.0.0.1'\r\nconst port = process.env.PORT || 3000\r\n//const MIDDLEWARES = ['common', 'router']\r\n\r\n\r\n\r\n//import './wechat-lib'\r\n\r\nclass Server {\r\n  constructor () {\r\n    //console.log(r)\r\n    this.app = new Koa()\r\n    this.useMiddleWares(this.app)\r\n  }\r\n\r\n  useMiddleWares (app) {\r\n\r\n    // return m=>{\r\n\t\t// \tm.forEach(o=>{\r\n\t\t// \t\trequire(`${r('./middlewares')}/${o}`)(MIDDLEWARES)\r\n\t\t// \t})\r\n    // }\r\n    \r\n    addBody(app)\r\n    addSession(app)\r\n    router(app)\r\n    \r\n  }\r\n\r\n  async start () {\r\n    // Instanciate nuxt.js\r\n    const nuxt = await new Nuxt(config)\r\n    // Build in development\r\n    if (config.dev) {\r\n      try {\r\n        const builder = new Builder(nuxt)\r\n        await builder.build()\r\n      } catch (e) {\r\n        console.error(e) // eslint-disable-line no-console\r\n        process.exit(1)\r\n      }\r\n    }\r\n\r\n    this.app.use(async (ctx, next) => {\r\n      await next()\r\n      ctx.status = 200\r\n      ctx.req.session = ctx.session\r\n\r\n      return new Promise((resolve, reject) => {\r\n        ctx.res.on('close', resolve)\r\n        ctx.res.on('finish', resolve)\r\n        nuxt.render(ctx.req, ctx.res, promise => {\r\n          promise.then(resolve).catch(reject)\r\n        })\r\n      })\r\n\r\n      await nuxt.render(ctx.req, ctx.res)\r\n    })\r\n\r\n    this.app.listen(port, host)\r\n    console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\r\n  }\r\n}\r\n\r\nconst app = new Server()\r\n\r\napp.start()\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}